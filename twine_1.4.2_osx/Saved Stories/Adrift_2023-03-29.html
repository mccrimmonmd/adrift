<!DOCTYPE html>
<!--[if lte IE 8]><html class="lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--><html><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Adrift</title>
<meta name="description" content="A dreamlike, text-based exploration game of adolescence.  Contains some moderate violence and sexually suggestive scenes.">
<meta name="identity" content="dream">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!--
Made in Twine 1.4.2 (running on Windows 8)
Built on 29 Mar 2023 at 23:16:17, -0700

Sugarcane is based on:

TiddlyWiki 1.2.39 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Published under a BSD open source license

Copyright (c) Osmosoft Limited 2005

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the Osmosoft Limited nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.
-->
<script title="engine">
(function(){

function clone(a){var constructor,b,proto;if(!a||typeof a!="object"){return a
}constructor=a.constructor;if(constructor==Date||constructor==RegExp){b=new constructor(a)}else{if(constructor==Array){b=[]}else{if(a.nodeType&&typeof a.cloneNode=="function"){b=a.cloneNode(true)}else{proto=(typeof Object.getPrototypeOf=="function"?Object.getPrototypeOf(a):a.__proto__);b=proto?Object.create(proto):{}}}}for(var property in a){if(Object.prototype.hasOwnProperty.call(a,property)&&!isCyclic(a[property])){if(typeof a[property]=="object"){try{b[property]=clone(a[property]);continue}catch(e){}}b[property]=a[property]}}return b}function isCyclic(obj){var properties=[];return(function recurse(obj){var key,i,ownProps=[];if(obj&&typeof obj=="object"){if(properties.indexOf(obj)>-1){return true
}properties.push(obj);for(key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&recurse(obj[key])){return true
}}}return false}(obj))}function insertElement(a,d,f,c,e){var b=document.createElement(d);if(f){b.id=f}if(c){b.className=c}if(e){insertText(b,e)}if(a){a.appendChild(b)}return b}function addClickHandler(el,fn){if(el.addEventListener){el.addEventListener("click",fn)}else{if(el.attachEvent){el.attachEvent("onclick",fn)}}}function insertText(a,b){return a.appendChild(document.createTextNode(b))}function removeChildren(a){while(a.hasChildNodes()){a.removeChild(a.firstChild)}}function findPassageParent(el){while(el&&el!=document.body&&!~el.className.indexOf("passage")){el=el.parentNode}return el==document.body?null:el}function setPageElement(c,b,a){var place;if(place=(typeof c=="string"?document.getElementById(c):c)){removeChildren(place);if(tale.has(b)){new Wikifier(place,tale.get(b).processText())}else{new Wikifier(place,a)}}}var scrollWindowInterval;function scrollWindowTo(e,margin){var d=window.scrollY?window.scrollY:document.documentElement.scrollTop,m=window.innerHeight?window.innerHeight:document.documentElement.clientHeight,g=k(e),j=(d>g)?-1:1,b=0,c=Math.abs(d-g);scrollWindowInterval&&window.clearInterval(scrollWindowInterval);if(c){scrollWindowInterval=window.setInterval(h,25)}function h(){b+=0.1;window.scrollTo(0,d+j*(c*Math.easeInOut(b)));if(b>=1){window.clearInterval(scrollWindowInterval)}}function k(o){var p=a(o),h=o.offsetHeight,n=d+m;p=Math.min(Math.max(p+(margin||0)*(p<d?-1:1),0),n);if(p<d){return p
}else{if(p+h>n){if(h<m){return(p-(m-h)+20)}else{return p
}}else{return p
}}}function a(l){var m=0;while(l.offsetParent){m+=l.offsetTop;l=l.offsetParent}return m}}function delta(old,neu){var vars,ret={};if(old&&neu){for(vars in neu){if(neu[vars]!==old[vars]){ret[vars]=neu[vars]}}}return ret}function decompile(val){var i,ret;if((typeof val!="object"&&typeof val!="function")||!val){return val
}else{if(val instanceof Passage){return{"[[Passage]]":val.id}}else{if(Array.isArray(val)){ret=[]}else{ret={}}}}for(i in val){if(Object.prototype.hasOwnProperty.call(val,i)&&!isCyclic(val[i])){ret[i]=decompile(val[i])}}if(typeof val=="function"||val instanceof RegExp){try{internalEval(val+"");ret["[[Call]]"]=val+""}catch(e){ret["[[Call]]"]="function(){}"}}return ret}function recompile(val){var i,ret=val;if(val&&typeof val=="object"){if(typeof val["[[Passage]]"]=="number"){return tale.get(val["[[Passage]]"])}if(typeof val["[[Call]]"]=="string"){try{ret=internalEval(val["[[Call]]"])}catch(e){}}for(i in val){if(Object.prototype.hasOwnProperty.call(val,i)){ret[i]=recompile(val[i])}}}return ret}function addStyle(b){if(document.createStyleSheet){document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd","&nbsp;<style>"+b+"</style>")}else{var a=document.createElement("style");a.appendChild(document.createTextNode(b));document.getElementsByTagName("head")[0].appendChild(a)}}function alterCSS(text){var temp="",imgPassages=tale.lookup("tags","Twine.image");text=text.replace(/\/\*(?:[^\*]|\*(?!\/))*\*\//g,"");text=text.replace(/:link/g,"[class*=Link]");text=text.replace(/:visited/g,".visitedLink");text=text.replace(/@import\s+(?:url\s*\(\s*['"]?|['"])[^"'\s]+(?:['"]?\s*\)|['"])\s*([\w\s\(\)\d\:,\-]*);/g,function(e){temp+=e;return""});text=temp+text;return text.replace(new RegExp(Wikifier.imageFormatter.lookahead,"gim"),function(m,p1,p2,p3,src){for(var i=0;i<imgPassages.length;i++){if(imgPassages[i].title==src){src=imgPassages[i].text;break}}return"url("+src+")"})}function setTransitionCSS(styleText){styleText=alterCSS(styleText);var style=document.getElementById("transitionCSS");style.styleSheet?(style.styleSheet.cssText=styleText):(style.innerHTML=styleText)}function throwError(a,b,tooltip){if(a){var elem=insertElement(a,"span",null,"marked",b);tooltip&&elem.setAttribute("title",tooltip)}else{alert("Regrettably, this "+tale.identity()+"'s code just ran into a problem:\n"+b+".\n"+softErrorMessage)}}Math.easeInOut=function(a){return(1-((Math.cos(a*Math.PI)+1)/2))};String.prototype.readMacroParams=function(keepquotes){var exec,re=/(?:\s*)(?:(?:"([^"]*)")|(?:'([^']*)')|(?:\[\[((?:[^\]]|\](?!\]))*)\]\])|([^"'\s]\S*))/mg,params=[];do{var val;exec=re.exec(this);if(exec){if(exec[1]){val=exec[1];keepquotes&&(val='"'+val+'"')}else{if(exec[2]){val=exec[2];keepquotes&&(val="'"+val+"'")}else{if(exec[3]){val=exec[3];keepquotes&&(val='"'+val.replace('"','\\"')+'"')}else{if(exec[4]){val=exec[4]}}}}val&&params.push(val)}}while(exec);return params};String.prototype.readBracketedList=function(){var c,b="\\[\\[([^\\]]+)\\]\\]",a="[^\\s$]+",e="(?:"+b+")|("+a+")",d=new RegExp(e,"mg"),f=[];do{c=d.exec(this);if(c){if(c[1]){f.push(c[1])}else{if(c[2]){f.push(c[2])}}}}while(c);return(f)};function rot13(s){return s.replace(/[a-zA-Z]/g,function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt()+13)?c:c-26)})}Object.create||(function(){var F=function(){};Object.create=function(o){if(typeof o!="object"){throw TypeError()}F.prototype=o;return new F()}})();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")});Array.isArray||(Array.isArray=function(arg){return Object.prototype.toString.call(arg)==="[object Array]"});Array.prototype.indexOf||(Array.prototype.indexOf=function(b,d){d=(d==null)?0:d;var a=this.length;for(var c=d;c<a;c++){if(this[c]==b){return c
}}return -1});Array.prototype.forEach||(Array.prototype.forEach=function(fun){if(this==null){throw TypeError()}var t=Object(this);var len=+t.length;if(typeof fun!="function"){throw TypeError()}var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t){fun.call(thisArg,t[i],i,t)}}});(function(){function t(t){this.message=t}var e=window,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=Error(),t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var o,n,a=0,i=r,c="";e.charAt(0|a)||(i="=",a%1);c+=i.charAt(63&o>>8-8*(a%1))){if(n=e.charCodeAt(a+=0.75),n>255){throw new t()}o=o<<8|n}return c}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),1==e.length%4){throw new t()}for(var o,n,a=0,i=0,c="";n=e.charAt(i++);~n&&(o=a%4?64*o+n:n,a++%4)?c+=String.fromCharCode(255&o>>(6&-2*a)):0){n=r.indexOf(n)}return c})})();var hasTransition="transition" in document.documentElement.style||"-webkit-transition" in document.documentElement.style;function fade(f,c){var h;var e=f.cloneNode(true);var g=(c.fade=="in")?1:-1;f.parentNode.replaceChild(e,f);if(c.fade=="in"){h=0;e.style.visibility="visible"}else{h=1
}b(e,h);var a=window.setInterval(d,25);function d(){h+=0.05*g;b(e,Math.easeInOut(h));if(((g==1)&&(h>=1))||((g==-1)&&(h<=0))){f.style.visibility=(c.fade=="in")?"visible":"hidden";if(e.parentNode){e.parentNode.replaceChild(f,e)}window.clearInterval(a);if(c.onComplete){c.onComplete.call(f)}}}function b(k,j){var l=Math.floor(j*100);k.style.zoom=1;k.style.filter="alpha(opacity="+l+")";k.style.opacity=j}}function History(){this.history=[{passage:null,variables:{}}];this.id=new Date().getTime()+"";this.hash=""}History.prototype.encodeHistory=function(b,noVars){var ret=".",vars,type,hist=this.history[b],d=this.history[b+1]?delta(this.history[b+1].variables,hist.variables):hist.variables;function vtob(val){try{return window.btoa(unescape(encodeURIComponent(JSON.stringify(decompile(val)))))}catch(e){return"0"
}}if(!hist.passage||hist.passage.id==null){return""
}ret+=hist.passage.id.toString(36);if(noVars){return ret
}for(vars in d){type=typeof d[vars];if(type!="undefined"){ret+="$"+vtob(vars)+","+vtob(d[vars])}}for(vars in hist.linkVars){type=typeof hist.linkVars[vars];if(type!="function"&&type!="undefined"){ret+="["+vtob(vars)+","+vtob(hist.linkVars[vars])}}return ret};History.decodeHistory=function(str,prev){var name,splits,variable,c,d,ret={variables:clone(prev.variables)||{}},match=/([a-z0-9]+)((?:\$[A-Za-z0-9\+\/=]+,[A-Za-z0-9\+\/=]+)*)((?:\[[A-Za-z0-9\+\/=]+,[A-Za-z0-9\+\/=]+)*)/g.exec(str);function btov(str){try{return recompile(JSON.parse(decodeURIComponent(escape(window.atob(str)))))}catch(e){return 0
}}if(match){name=parseInt(match[1],36);if(!tale.has(name)){return false
}if(match[2]){ret.variables||(ret.variables={});splits=match[2].split("$");for(c=0;c<splits.length;c++){variable=splits[c].split(",");d=btov(variable[0]);if(d){ret.variables[d]=btov(variable[1])}}}if(match[3]){ret.linkVars||(ret.linkVars={});splits=match[3].split("[");for(c=0;c<splits.length;c++){variable=splits[c].split(",");d=btov(variable[0]);if(d){ret.linkVars[d]=btov(variable[1])}}}ret.passage=tale.get(name);return ret}};History.prototype.save=function(){var hist,b,a="";for(b=this.history.length-1;b>=0;b--){hist=this.history[b];if(!hist){break
}a+=this.encodeHistory(b)}return"#"+a};History.prototype.restore=function(){var a,b,c,vars;try{if(!window.location.hash||(window.location.hash=="#")){if(testplay){if(tale.has("StoryInit")){new Wikifier(insertElement(null,"span"),tale.get("StoryInit").text)}this.display(testplay,null,"quietly");return true}return false}if(window.location.hash.substr(0,2)=="#!"){c=window.location.hash.substr(2).split("_").join(" ");this.display(c,null,"quietly");return true}a=window.location.hash.replace("#","").split(".");for(b=0;b<a.length;b++){vars=History.decodeHistory(a[b],vars||{});if(vars){if(b==a.length-1){vars.variables=clone(this.history[0].variables);for(c in this.history[0].linkVars){vars.variables[c]=clone(this.history[0].linkVars[c])}this.history.unshift(vars);this.display(vars.passage.title,null,"back")}else{this.history.unshift(vars)}}}return true}catch(d){return false
}};History.prototype.saveVariables=function(c,el,callback){if(typeof callback=="function"){callback.call(el)}this.history.unshift({passage:c,variables:clone(this.history[0].variables)})};var restart=History.prototype.restart=function(){if(typeof window.history.replaceState=="function"){(typeof this.pushState=="function")&&this.pushState(true,window.location.href.replace(/#.*$/,""));window.location.reload()}else{window.location.hash=""}};var version={major:4,minor:2,revision:0,date:new Date("2014"),extensions:{}};var testplay,tale,state,prerender={},postrender={},macros=window.macros={};version.extensions.displayMacro={major:2,minor:0,revision:0};macros.display={parameters:[],handler:function(place,macroName,params,parser){var t,j,output,oldDisplayParams,name=parser.fullArgs();if(macroName!="display"){output=macroName;params=parser.fullMatch().replace(/^\S*|>>$/g,"").readMacroParams(true);try{for(j=0;j<params.length;j++){params[j]=internalEval(Wikifier.parse(params[j]))}}catch(e){throwError(place,parser.fullMatch()+" bad argument: "+params[j],parser.fullMatch());return}}else{try{output=internalEval(name)}catch(e){}if(output==null){if(tale.has(name)){output=name
}}}if(!output){throwError(place,"<<"+macroName+'>>: "'+name+'" did not evaluate to a passage name',parser.fullMatch())}else{if(!tale.has(output+"")){throwError(place,"<<"+macroName+'>>: The "'+output+'" passage does not exist',parser.fullMatch())}else{oldDisplayParams=this.parameters;this.parameters=params;t=tale.get(output+"");if(t.tags.indexOf("script")>-1){scriptEval(t)}else{new Wikifier(place,t.processText())}this.parameters=oldDisplayParams
}}}};version.extensions.actionsMacro={major:1,minor:2,revision:0};macros.actions={handler:function(a,f,g){var v=state.history[0].variables,e=insertElement(a,"ul");if(!v["actions clicked"]){v["actions clicked"]={}}for(var b=0;b<g.length;b++){if(v["actions clicked"][g[b]]){continue
}var d=insertElement(e,"li");var c=Wikifier.createInternalLink(d,g[b],(function(link){return function(){state.history[0].variables["actions clicked"][link]=true}}(g[b])));insertText(c,g[b])}}};version.extensions.printMacro={major:1,minor:1,revision:1};macros.print={handler:function(place,macroName,params,parser){var args=parser.fullArgs(macroName!="print"),output;try{output=internalEval(args);if(output!=null&&(typeof output!="number"||!isNaN(output))){new Wikifier(place,""+output)}}catch(e){throwError(place,"<<print>> bad expression: "+params.join(" "),parser.fullMatch())}}};version.extensions.setMacro={major:1,minor:1,revision:0};macros.set={handler:function(a,b,c,parser){macros.set.run(a,parser.fullArgs(),parser,c.join(" "))},run:function(a,expression,parser,original){try{return internalEval(expression)}catch(e){throwError(a,"bad expression: "+(original||expression),parser?parser.fullMatch():expression)}}};version.extensions.ifMacros={major:2,minor:0,revision:0};macros["if"]={handler:function(place,macroName,params,parser){var conditions=[],clauses=[],rawConds=[],srcOffset=parser.source.indexOf(">>",parser.matchStart)+2,src=parser.source.slice(srcOffset),endPos=-1,rawCond=params.join(" "),currentCond=parser.fullArgs(),currentClause="",t=0,nesting=0,i=0;for(;i<src.length;i++){if((src.substr(i,6)=="<<else")&&!nesting){rawConds.push(rawCond);conditions.push(currentCond.trim());clauses.push(currentClause);currentClause="";t=src.indexOf(">>",i+6);if(src.substr(i+6,4)==" if "||src.substr(i+6,3)=="if "){rawCond=src.slice(i+9,t);currentCond=Wikifier.parse(rawCond)}else{rawCond="";currentCond="true"}i=t+2}if(src.substr(i,5)=="<<if "){nesting++
}if(src.substr(i,9)=="<<endif>>"){nesting--;if(nesting<0){endPos=srcOffset+i+9;rawConds.push(rawCond);conditions.push(currentCond.trim());clauses.push(currentClause);break}}currentClause+=src.charAt(i)}if(endPos!=-1){parser.nextMatch=endPos;try{for(i=0;i<clauses.length;i++){if(internalEval(conditions[i])){new Wikifier(place,clauses[i]);break}}}catch(e){throwError(place,"<<"+(i?"else ":"")+"if>> bad condition: "+rawConds[i],!i?parser.fullMatch():"<<else if "+rawConds[i]+">>")}}else{throwError(place,"I can't find a matching <<endif>>",parser.fullMatch())}}};macros["else"]=macros.elseif=macros.endif={handler:function(){}};version.extensions.rememberMacro={major:2,minor:0,revision:0};macros.remember={handler:function(place,macroName,params,parser){var variable,value,re,match,statement=params.join(" ");macros.set.run(place,parser.fullArgs(),null,params.join(" "));if(!window.localStorage){throwError(place,"<<remember>> can't be used "+(window.location.protocol=="file:"?" by local HTML files ":"")+" in this browser.",parser.fullMatch());return}re=new RegExp(Wikifier.textPrimitives.variable,"g");while(match=re.exec(statement)){variable=match[1];value=state.history[0].variables[variable];try{value=JSON.stringify(value)}catch(e){throwError(place,"can't <<remember>> the variable $"+variable+" ("+(typeof value)+")",parser.fullMatch());return}window.localStorage[this.prefix+variable]=value}},init:function(){var i,variable,value;if(tale.has("StoryTitle")){this.prefix="Twine."+tale.title+"."}else{this.prefix="Twine.Untitled Story."}for(i in window.localStorage){if(i.indexOf(this.prefix)==0){variable=i.substr(this.prefix.length);value=window.localStorage[i];try{value=JSON.parse(value);state.history[0].variables[variable]=value}catch(e){}}}},expire:null,prefix:null};version.extensions.forgetMacro={major:1,minor:0,revision:0};macros.forget={handler:function(place,macroName,params){var re,match,variable,statement=params.join(" ");re=new RegExp(Wikifier.textPrimitives.variable,"g");while(match=re.exec(statement)){variable=match[1]+"";delete state.history[0].variables[variable];delete window.localStorage[macros.remember.prefix+variable]}}};version.extensions.SilentlyMacro={major:1,minor:1,revision:0};macros.nobr=macros.silently={handler:function(place,macroName,f,parser){var i,h=insertElement(null,"div"),k=parser.source.indexOf(">>",parser.matchStart)+2,a=parser.source.slice(k),d=-1,c="",l=0;for(i=0;i<a.length;i++){if(a.substr(i,macroName.length+7)=="<<end"+macroName+">>"){if(l==0){d=k+i+macroName.length+7;break}else{l--
}}else{if(a.substr(i,macroName.length+4)=="<<"+macroName+">>"){l++
}}if(macroName=="nobr"&&a.charAt(i)=="\n"){c+="\u200c"}else{c+=a.charAt(i)}}if(d!=-1){new Wikifier(macroName=="nobr"?place:h,c);parser.nextMatch=d}else{throwError(place,"can't find matching <<end"+macroName+">>",parser.fullMatch())}}};macros.endsilently={handler:function(){}};version.extensions.choiceMacro={major:2,minor:0,revision:0};macros.choice={callback:function(){var i,other,passage=findPassageParent(this);if(passage){other=passage.querySelectorAll(".choice");for(i=0;i<other.length;i++){other[i].outerHTML="<span class=disabled>"+other[i].innerHTML+"</span>"}state.history[0].variables["choice clicked"][passage.id.replace(/\|[^\]]*$/,"")]=true}},handler:function(A,C,D,parser){var link,id,match,text=D[1]||D[0].split("|")[0],passage=findPassageParent(A);if(!passage){throwError(A,"<<"+C+">> can't be used here.",parser.fullMatch());return}id=(passage&&passage.id.replace(/\|[^\]]*$/,""));if(id&&(state.history[0].variables["choice clicked"]||(state.history[0].variables["choice clicked"]={}))[id]){insertElement(A,"span",null,"disabled",text)}else{match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullMatch());if(match){link=Wikifier.linkFormatter.makeLink(A,match,this.callback)}else{link=Wikifier.linkFormatter.makeLink(A,[0,text,D[0]],this.callback)}link.className+=" "+C}}};version.extensions.backMacro={major:2,minor:0,revision:0};macros.back={labeltext:"&#171; back",handler:function(a,b,e,parser){var labelParam,c,el,labeltouse=this.labeltext,steps=1,stepsParam=e.indexOf("steps"),stepsParam2="";if(stepsParam>0){stepsParam2=e[stepsParam-1];if(stepsParam2[0]=="$"){try{stepsParam2=internalEval(Wikifier.parse(stepsParam2))}catch(r){throwError(a,parser.fullMatch()+" bad expression: "+r.message,parser.fullMatch());return}}steps=+stepsParam2;if(steps>=state.history.length-1){steps=state.history.length-2}e.splice(stepsParam-1,2)}labelParam=e.indexOf("label");if(labelParam>-1){if(!e[labelParam+1]){throwError(a,parser.fullMatch()+": "+e[labelParam]+" keyword needs an additional label parameter",parser.fullMatch());return}labeltouse=e[labelParam+1];e.splice(labelParam,2)}if(stepsParam<=0){if(e[0]){if(e[0].charAt(0)=="$"){try{e=internalEval(Wikifier.parse(e[0]))}catch(r){throwError(a,parser.fullMatch()+" bad expression: "+r.message,parser.fullMatch());return}}else{e=e[0]}if(!tale.has(e)){throwError(a,'The "'+e+'" passage does not exist',parser.fullMatch());return}for(c=0;c<state.history.length;c++){if(state.history[c].passage.title==e){steps=c;break}}}}el=document.createElement("a");el.className=b;addClickHandler(el,(function(b){return function(){return macros.back.onclick(b=="back",steps,el)}}(b)));el.innerHTML=labeltouse;a.appendChild(el)}};version.extensions.returnMacro={major:2,minor:0,revision:0};macros["return"]={labeltext:"&#171; return",handler:function(a,b,e){macros.back.handler.call(this,a,b,e)}};version.extensions.textInputMacro={major:2,minor:0,revision:0};macros.checkbox=macros.radio=macros.textinput={handler:function(A,C,D,parser){var match,class_=C.replace("input","Input"),q=A.querySelectorAll("input"),id=class_+"|"+((q&&q.length)||0);input=insertElement(null,"input",id,class_);input.name=D[0];input.type=C.replace("input","");A.appendChild(input);if(C=="textinput"&&D[1]){match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullMatch());if(match){Wikifier.linkFormatter.makeLink(A,match,macros.button.callback,"button")}else{Wikifier.linkFormatter.makeLink(A,[0,(D[2]||D[1]),D[1]],macros.button.callback,"button")}}else{if((C=="radio"||C=="checkbox")&&D[1]){input.value=D[1];insertElement(A,"label","","",D[1]).setAttribute("for",id);if(D[2]){insertElement(A,"br");D.splice(1,1);macros[C].handler(A,C,D)}}}}};version.extensions.buttonMacro={major:1,minor:0,revision:0};macros.button={callback:function(){var el=findPassageParent(this);if(el){var inputs=el.querySelectorAll("input");for(i=0;i<inputs.length;i++){if(inputs[i].type!="checkbox"&&(inputs[i].type!="radio"||inputs[i].checked)){macros.set.run(null,Wikifier.parse(inputs[i].name+' = "'+inputs[i].value.replace(/"/g,'\\"')+'"'))}else{if(inputs[i].type=="checkbox"&&inputs[i].checked){macros.set.run(null,Wikifier.parse(inputs[i].name+" = [].concat("+inputs[i].name+" || []);"));macros.set.run(null,Wikifier.parse(inputs[i].name+'.push("'+inputs[i].value.replace(/"/g,'\\"')+'")'))}}}}},handler:function(A,C,D,parser){var link,match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullMatch());if(match){Wikifier.linkFormatter.makeLink(A,match,this.callback,"button")}else{Wikifier.linkFormatter.makeLink(A,[0,D[1]||D[0],D[0]],this.callback,"button")}}};function Passage(c,b,a,ofunc){var t;if(!this||this.constructor!=Passage){throw new ReferenceError("passage() must be in lowercase")}this.title=c;ofunc=typeof ofunc=="function"&&ofunc;if(b){this.id=a;this.tags=b.getAttribute("tags");if(typeof this.tags=="string"){if(ofunc){this.tags=ofunc(this.tags)}this.tags=this.tags.readBracketedList()}else{this.tags=[]}t=b.firstChild?b.firstChild.nodeValue:"";if(ofunc&&!this.isImage()){this.text=ofunc(Passage.unescapeLineBreaks(t))}else{this.text=Passage.unescapeLineBreaks(t)}if(!this.isImage()){this.preloadImages()}if(/\.char\b|\[data\-char\b/.exec(this.text)&&Wikifier.charSpanFormatter){Wikifier.formatters.push(Wikifier.charSpanFormatter);delete Wikifier.charSpanFormatter}}else{this.text="@@This passage does not exist: "+c+"@@";this.tags=[]}}Passage.prototype.isImage=function(){return !!~(this.tags.indexOf("Twine.image"))};Passage.prototype.preloadImages=function(){var u="\\s*['\"]?([^\"'$]+\\.(jpe?g|a?png|gif|bmp|webp|svg))['\"]?\\s*",k=function(c,e){var i,d;do{d=c.exec(this.text);if(d){i=new Image();i.src=d[e]}}while(d);return k};k.call(this,new RegExp(Wikifier.imageFormatter.lookahead.replace("[^\\[\\]\\|]+",u),"mg"),4).call(this,new RegExp("url\\s*\\("+u+"\\)","mig"),1).call(this,new RegExp("src\\s*="+u,"mig"),1)};Passage.unescapeLineBreaks=function(a){if(a&&typeof a=="string"){return a.replace(/\\n/mg,"\n").replace(/\\t/mg,"\t").replace(/\\s/mg,"\\").replace(/\\/mg,"\\").replace(/\r/mg,"")}else{return""
}};Passage.prototype.setTags=function(b){var t=this.tags!=null&&this.tags.length?this.tags.join(" "):"";if(t){b.setAttribute("data-tags",this.tags.join(" "))}document.body.setAttribute("data-tags",t)};Passage.prototype.processText=function(){var ret=this.text;if(~this.tags.indexOf("nobr")){ret=ret.replace(/\n/g,"\u200c")}if(this.isImage()){ret="[img["+ret+"]]"}return ret};function Tale(){var a,b,c,lines,i,kv,nsc,isImage,settings=this.storysettings={lookup:function(a,dfault){if(!(a in this)){return dfault
}return(this[a]+"")!="off"}},tiddlerTitle="";window.tale=this;this.passages={};if(document.normalize){document.normalize()}a=document.getElementById("storeArea").children;for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&c.getAttribute("tiddler")=="StorySettings"){lines=new Passage("StorySettings",c,0,null,null).text.split("\n");for(i in lines){if(typeof lines[i]=="string"&&lines[i].indexOf(":")>-1){kv=lines[i].toLowerCase().split(":");kv[0]=kv[0].replace(/^\s+|\s+$/g,"");kv[1]=kv[1].replace(/^\s+|\s+$/g,"");if(kv[0]!="lookup"){settings[kv[0]]=kv[1]}}}}}if(settings.obfuscate=="rot13"){for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&(tiddlerTitle=c.getAttribute("tiddler"))){isImage=(c.getAttribute("tags")+"").indexOf("Twine.image")>-1;if(tiddlerTitle!="StorySettings"&&!isImage){tiddlerTitle=rot13(tiddlerTitle)}this.passages[tiddlerTitle]=new Passage(tiddlerTitle,c,b+1,!isImage&&rot13)
}}}else{for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&(tiddlerTitle=c.getAttribute("tiddler"))){this.passages[tiddlerTitle]=new Passage(tiddlerTitle,c,b,null,null)}}}}Tale.prototype.has=function(a){if(typeof a=="string"){return(this.passages[a]!=null)}else{for(var i in this.passages){if(this.passages[i].id==a){return true
}}return false}};Tale.prototype.get=function(a){if(typeof a=="string"){return this.passages[a]||new Passage(a)}else{for(var i in this.passages){if(this.passages[i].id==a){return this.passages[i]}}}};Tale.prototype.lookup=function(h,g,a){var d=[];for(var c in this.passages){var f=this.passages[c];for(var b=0;b<f[h].length;b++){if(f[h][b]==g){d.push(f)}}}if(!a){a="title"
}d.sort(function(k,j){if(k[a]==j[a]){return(0)}else{return(k[a]<j[a])?-1:+1}});return d};Tale.prototype.canUndo=function(){return this.storysettings.lookup("undo",true)};Tale.prototype.identity=function(){var meta=document.querySelector("meta[name='identity']"),identity=meta?meta.getAttribute("content"):"story";return(Tale.prototype.identity=function(){return identity
})()};Tale.prototype.forEachStylesheet=function(tags,callback){var passage,i;tags=tags||[];if(typeof callback!="function"){return
}for(passage in this.passages){passage=tale.passages[passage];if(passage&&~passage.tags.indexOf("stylesheet")){for(i=0;i<tags.length;i++){if(~passage.tags.indexOf(tags[i])){callback(passage);break}}}}};Tale.prototype.setPageElements=function(){var storyTitle,defaultTitle="Adrift";setPageElement("storyTitle","StoryTitle",defaultTitle);storyTitle=document.getElementById("storyTitle");document.title=this.title=(storyTitle&&(storyTitle.textContent||storyTitle.innerText))||defaultTitle;setPageElement("storySubtitle","StorySubtitle","");if(tale.has("StoryAuthor")){setPageElement("titleSeparator",null,"\n");setPageElement("storyAuthor","StoryAuthor","")}if(tale.has("StoryMenu")){document.getElementById("storyMenu").setAttribute("style","");setPageElement("storyMenu","StoryMenu","")}};function Wikifier(place,source){this.source=source;this.output=place;this.nextMatch=0;this.assembleFormatterMatches(Wikifier.formatters);this.subWikify(this.output)}Wikifier.textPrimitives={upperLetter:"[A-Z\u00c0-\u00de\u0150\u0170]",lowerLetter:"[a-z\u00df-\u00ff_0-9\\-\u0151\u0171]",anyLetter:"[A-Za-z\u00c0-\u00de\u00df-\u00ff_0-9\\-\u0150\u0170\u0151\u0171]"};Wikifier.textPrimitives.variable="\\$((?:"+Wikifier.textPrimitives.anyLetter.replace("\\-","")+"*"+Wikifier.textPrimitives.anyLetter.replace("0-9\\-","")+"+"+Wikifier.textPrimitives.anyLetter.replace("\\-","")+"*)+)";Wikifier.textPrimitives.unquoted="(?=(?:[^\"'\\\\]*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"))*[^'\"]*$)";Wikifier.prototype.assembleFormatterMatches=function(formatters){this.formatters=[];var pattern=[];for(var n=0;n<formatters.length;n++){pattern.push("("+formatters[n].match+")");this.formatters.push(formatters[n])}this.formatterRegExp=new RegExp(pattern.join("|"),"mg")};Wikifier.prototype.subWikify=function(output,terminator){var terminatorMatch,formatterMatch,oldOutput=this.output;this.output=output;var terminatorRegExp=terminator?new RegExp("("+terminator+")","mg"):null;do{this.formatterRegExp.lastIndex=this.nextMatch;if(terminatorRegExp){terminatorRegExp.lastIndex=this.nextMatch}formatterMatch=this.formatterRegExp.exec(this.source);terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null;if(terminatorMatch&&(!formatterMatch||terminatorMatch.index<=formatterMatch.index)){if(terminatorMatch.index>this.nextMatch){this.outputText(this.output,this.nextMatch,terminatorMatch.index)}this.matchStart=terminatorMatch.index;this.matchLength=terminatorMatch[1].length;this.matchText=terminatorMatch[1];this.nextMatch=terminatorMatch.index+terminatorMatch[1].length;this.output=oldOutput;return}else{if(formatterMatch){if(formatterMatch.index>this.nextMatch){this.outputText(this.output,this.nextMatch,formatterMatch.index)}this.matchStart=formatterMatch.index;this.matchLength=formatterMatch[0].length;this.matchText=formatterMatch[0];this.nextMatch=this.formatterRegExp.lastIndex;var matchingFormatter=-1;for(var t=1;t<formatterMatch.length;t++){if(formatterMatch[t]){matchingFormatter=t-1;break}}if(matchingFormatter!=-1){this.formatters[matchingFormatter].handler(this)}}}}while(terminatorMatch||formatterMatch);if(this.nextMatch<this.source.length){this.outputText(this.output,this.nextMatch,this.source.length);this.nextMatch=this.source.length}this.output=oldOutput};Wikifier.prototype.outputText=function(place,startPos,endPos){if(place){insertText(place,this.source.substring(startPos,endPos))}};Wikifier.prototype.fullMatch=function(){return this.source.slice(this.matchStart,this.source.indexOf(">>",this.matchStart)+2)};Wikifier.prototype.fullArgs=function(includeName){var source=this.source.replace(/\u200c/g," "),endPos=this.nextMatch-2,startPos=source.indexOf(includeName?"<<":" ",this.matchStart);if(!~startPos||!~endPos||endPos<=startPos){return""
}return Wikifier.parse(source.slice(startPos+(includeName?2:1),endPos).trim())};Wikifier.parse=function(input){var m,re,b=input,found=[],g=Wikifier.textPrimitives.unquoted;function alter(from,to){b=b.replace(new RegExp(from+g,"gim"),to);return alter}re=new RegExp(Wikifier.textPrimitives.variable+g,"gi");while(m=re.exec(input)){if(!~found.indexOf(m[0])){b=m[0]+" == null && ("+m[0]+" = 0);"+b;found.push(m[0])}}alter(Wikifier.textPrimitives.variable,"state.history[0].variables.$1")("\\beq\\b"," == ")("\\bneq\\b"," != ")("\\bgt\\b"," > ")("\\bgte\\b"," >= ")("\\blt\\b"," < ")("\\blte\\b"," <= ")("\\band\\b"," && ")("\\bor\\b"," || ")("\\bnot\\b"," ! ")("\\bis\\b"," == ")("\\bto\\b"," = ");return b};Wikifier.formatHelpers={charFormatHelper:function(a){var b=insertElement(a.output,this.element);a.subWikify(b,this.terminator)},inlineCssHelper:function(w){var s,v,lookaheadMatch,gotMatch,styles=[],lookahead=Wikifier.styleByCharFormatter.lookahead,lookaheadRegExp=new RegExp(lookahead,"mg"),hadStyle=false,unDash=function(str){var s=str.split("-");if(s.length>1){for(var t=1;t<s.length;t++){s[t]=s[t].substr(0,1).toUpperCase()+s[t].substr(1)}}return s.join("")};styles.className="";do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source);gotMatch=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(gotMatch){hadStyle=true;if(lookaheadMatch[5]){styles.className+=lookaheadMatch[5].replace(/\./g," ")+" "}else{if(lookaheadMatch[1]){s=unDash(lookaheadMatch[1]);v=lookaheadMatch[2]}else{s=unDash(lookaheadMatch[3]);v=lookaheadMatch[4]}}switch(s){case"bgcolor":s="backgroundColor";break;case"float":s="cssFloat";break}styles.push({style:s,value:v});w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}while(gotMatch);return styles},monospacedByLineHelper:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){insertElement(w.output,"pre",null,null,lookaheadMatch[1]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}};Wikifier.formatters=[{name:"table",match:"^\\|(?:[^\\n]*)\\|(?:[fhc]?)$",lookahead:"^\\|([^\\n]*)\\|([fhc]?)$",rowTerminator:"\\|(?:[fhc]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[fhc]?$\\n?)",cellTerminator:"(?:\\x20*)\\|",rowTypes:{"c":"caption","h":"thead","":"tbody","f":"tfoot"},handler:function(w){var rowContainer,rowElement,lookaheadMatch,matched,table=insertElement(w.output,"table"),lookaheadRegExp=new RegExp(this.lookahead,"mg"),currRowType=null,nextRowType,prevColumns=[],rowCount=0;w.nextMatch=w.matchStart;do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source),matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){nextRowType=lookaheadMatch[2];if(nextRowType!=currRowType){rowContainer=insertElement(table,this.rowTypes[nextRowType])}currRowType=nextRowType;if(currRowType=="c"){if(rowCount==0){rowContainer.setAttribute("align","top")}else{rowContainer.setAttribute("align","bottom")}w.nextMatch=w.nextMatch+1;w.subWikify(rowContainer,this.rowTerminator)}else{rowElement=insertElement(rowContainer,"tr");this.rowHandler(w,rowElement,prevColumns)}rowCount++}}while(matched)},rowHandler:function(w,e,prevColumns){var cellMatch,matched,col=0,currColCount=1,cellRegExp=new RegExp(this.cellPattern,"mg");do{cellRegExp.lastIndex=w.nextMatch;cellMatch=cellRegExp.exec(w.source);matched=cellMatch&&cellMatch.index==w.nextMatch;if(matched){if(cellMatch[1]=="~"){var last=prevColumns[col];if(last){last.rowCount++;last.element.setAttribute("rowSpan",last.rowCount);last.element.setAttribute("rowspan",last.rowCount);last.element.valign="center"}w.nextMatch=cellMatch.index+cellMatch[0].length-1}else{if(cellMatch[1]==">"){currColCount++;w.nextMatch=cellMatch.index+cellMatch[0].length-1}else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}else{var spaceLeft=false,spaceRight=false,lastColCount,lastColElement,styles,cell,t;w.nextMatch++;styles=Wikifier.formatHelpers.inlineCssHelper(w);while(w.source.substr(w.nextMatch,1)==" "){spaceLeft=true;w.nextMatch++}if(w.source.substr(w.nextMatch,1)=="!"){cell=insertElement(e,"th");w.nextMatch++}else{cell=insertElement(e,"td")}prevColumns[col]={rowCount:1,element:cell};lastColCount=1;lastColElement=cell;if(currColCount>1){cell.setAttribute("colSpan",currColCount);cell.setAttribute("colspan",currColCount);currColCount=1}for(t=0;t<styles.length;t++){cell.style[styles[t].style]=styles[t].value}w.subWikify(cell,this.cellTerminator);if(w.matchText.substr(w.matchText.length-2,1)==" "){spaceRight=true
}if(spaceLeft&&spaceRight){cell.align="center"}else{if(spaceLeft){cell.align="right"}else{if(spaceRight){cell.align="left"}}}w.nextMatch=w.nextMatch-1}}}col++}}while(matched)}},{name:"rule",match:"^----$\\n?",handler:function(w){insertElement(w.output,"hr")}},{name:"emdash",match:"--",becomes:String.fromCharCode(8212),handler:function(a){insertElement(a.output,"span",null,"char",this.becomes).setAttribute("data-char","emdash")}},{name:"heading",match:"^!{1,5}",terminator:"\\n",handler:function(w){var e=insertElement(w.output,"h"+w.matchLength);w.subWikify(e,this.terminator)}},{name:"monospacedByLine",match:"^\\{\\{\\{\\n",lookahead:"^\\{\\{\\{\\n((?:^[^\\n]*\\n)+?)(^\\}\\}\\}$\\n?)",handler:Wikifier.formatHelpers.monospacedByLineHelper},{name:"quoteByBlock",match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){var e=insertElement(w.output,"blockquote");w.subWikify(e,this.terminator)}},{name:"list",match:"^(?:(?:\\*+)|(?:#+))",lookahead:"^(?:(\\*+)|(#+))",terminator:"\\n",handler:function(w){var newType,newLevel,t,len,bulletType,lookaheadMatch,matched,lookaheadRegExp=new RegExp(this.lookahead,"mg"),placeStack=[w.output],currType=null,currLevel=0;w.nextMatch=w.matchStart;do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source);matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){newLevel=lookaheadMatch[0].length;if(lookaheadMatch[1]){bulletType=lookaheadMatch[1].slice(-1);newType="ul"}else{if(lookaheadMatch[2]){newType="ol"
}}w.nextMatch+=newLevel;if(newLevel>currLevel){for(t=currLevel;t<newLevel;t++){placeStack.push(insertElement(placeStack[placeStack.length-1],newType))}}else{if(newLevel<currLevel){for(t=currLevel;t>newLevel;t--){placeStack.pop()}}else{if(newLevel==currLevel&&newType!=currType){placeStack.pop();placeStack.push(insertElement(placeStack[placeStack.length-1],newType))}}}currLevel=newLevel;currType=newType;t=insertElement(placeStack[placeStack.length-1],"li");if(bulletType&&bulletType!="*"){t.setAttribute("data-bullet",bulletType)}w.subWikify(t,this.terminator)}}while(matched)}},(Wikifier.urlFormatter={name:"urlLink",match:"(?:https?|mailto|javascript|ftp|data):[^\\s'\"]+(?:/|\\b)",handler:function(w){var e=Wikifier.createExternalLink(w.output,w.matchText);w.outputText(e,w.matchStart,w.nextMatch)}}),(Wikifier.linkFormatter={name:"prettyLink",match:"\\[\\[",lookahead:"\\[\\[([^\\|]*?)(?:\\|(.*?))?\\](?:\\[(.*?)])?\\]",makeInternalOrExternal:function(out,title,callback,type){if(title&&!tale.has(title)&&(title.match(Wikifier.urlFormatter.match,"g")||~title.search(/[\.\\\/#]/))){return Wikifier.createExternalLink(out,title,callback,type)
}else{return Wikifier.createInternalLink(out,title,callback,type)}},makeCallback:function(code,callback){return function(){macros.set.run(null,Wikifier.parse(code),null,code);typeof callback=="function"&&callback.call(this)}},makeLink:function(out,match,callback2,type){var link,title,callback;if(match[3]){callback=this.makeCallback(match[3],callback2)}else{typeof callback2=="function"&&(callback=callback2)}title=Wikifier.parsePassageTitle(match[2]||match[1]);link=this.makeInternalOrExternal(out,title,callback,type);setPageElement(link,null,match[2]?match[1]:title);return link},handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){this.makeLink(w.output,lookaheadMatch);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}}),(Wikifier.imageFormatter={name:"image",match:"\\[(?:[<]{0,1})(?:[>]{0,1})[Ii][Mm][Gg]\\[",lookahead:"\\[([<]?)(>?)img\\[(?:([^\\|\\]]+)\\|)?([^\\[\\]\\|]+)\\](?:\\[([^\\]]*)\\]?)?(\\])",importedImage:function(img,passageName){var imgPassages,imgname;try{imgname=internalEval(Wikifier.parse(passageName))}catch(e){}if(!imgname){imgname=passageName
}imgPassages=tale.lookup("tags","Twine.image");for(j=0;j<imgPassages.length;j++){if(imgPassages[j].title==imgname){img.src=imgPassages[j].text;break}}},handler:function(w){var e,img,j,lookaheadMatch,lookaheadRegExp=new RegExp(this.lookahead,"mig");lookaheadRegExp.lastIndex=w.matchStart;lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){e=w.output,title=Wikifier.parsePassageTitle(lookaheadMatch[5]);if(title){e=Wikifier.linkFormatter.makeInternalOrExternal(w.output,title)}img=insertElement(e,"img");if(lookaheadMatch[1]){img.align="left"}else{if(lookaheadMatch[2]){img.align="right"}}if(lookaheadMatch[3]){img.title=lookaheadMatch[3]}this.importedImage(img,lookaheadMatch[4]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}}),{name:"macro",match:"<<",lookahead:/<<([^>\s]+)(?:\s*)((?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'|"(?:[^"\\]*\\.)*[^"\\]*"|[^'"\\>]|>(?!>))*)>>/mg,handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead);lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source.replace(/\u200c/g,"\n"));if(lookaheadMatch&&lookaheadMatch.index==w.matchStart&&lookaheadMatch[1]){var params=lookaheadMatch[2].readMacroParams();w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length;var name=lookaheadMatch[1];try{var macro=macros[name];if(macro&&typeof macro=="object"&&macro.handler){macro.handler(w.output,name,params,w)}else{if(name[0]=="$"){macros.print.handler(w.output,name,[name].concat(params),w)}else{if(tale.has(name)){macros.display.handler(w.output,name,[name].concat(params),w)}else{throwError(w.output,'No macro or passage called "'+name+'"',w.fullMatch())}}}}catch(e){throwError(w.output,"Error executing macro "+name+": "+e.toString(),w.fullMatch())}}}},{name:"html",match:"<html>",lookahead:"<html>((?:.|\\n)*?)</html>",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=insertElement(w.output,"span");e.innerHTML=lookaheadMatch[1];w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"commentByBlock",match:"/%",lookahead:"/%((?:.|\\n)*?)%/",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"boldByChar",match:"''",terminator:"''",element:"strong",handler:Wikifier.formatHelpers.charFormatHelper},{name:"strikeByChar",match:"==",terminator:"==",element:"strike",handler:Wikifier.formatHelpers.charFormatHelper},{name:"underlineByChar",match:"__",terminator:"__",element:"u",handler:Wikifier.formatHelpers.charFormatHelper},{name:"italicByChar",match:"//",terminator:"//",element:"em",handler:Wikifier.formatHelpers.charFormatHelper},{name:"subscriptByChar",match:"~~",terminator:"~~",element:"sub",handler:Wikifier.formatHelpers.charFormatHelper},{name:"superscriptByChar",match:"\\^\\^",terminator:"\\^\\^",element:"sup",handler:Wikifier.formatHelpers.charFormatHelper},{name:"monospacedByChar",match:"\\{\\{\\{",lookahead:"\\{\\{\\{((?:.|\\n)*?)\\}\\}\\}",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=insertElement(w.output,"code",null,null,lookaheadMatch[1]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},(Wikifier.styleByCharFormatter={name:"styleByChar",match:"@@",terminator:"@@",lookahead:"(?:([^\\(@]+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:([^\\.:@]+):([^;\\|\\n]+);)|(?:\\.([^;\\|\\n]+);)",handler:function(w){var e=insertElement(w.output,"span",null,null,null);var styles=Wikifier.formatHelpers.inlineCssHelper(w);if(styles.length==0){e.className="marked"}else{for(var t=0;t<styles.length;t++){e.style[styles[t].style]=styles[t].value}if(typeof styles.className=="string"){e.className=styles.className}}w.subWikify(e,this.terminator)}}),{name:"lineBreak",match:"\\n",handler:function(w){insertElement(w.output,"br")}},{name:"continuedLine",match:"\\\\\\s*?\\n",handler:function(a){a.nextMatch=a.matchStart+2}},{name:"htmlCharacterReference",match:"(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)",handler:function(w){var el=document.createElement("div");el.innerHTML=w.matchText;insertText(w.output,el.textContent)}},{name:"htmltag",match:"<(?:\\/?[\\w\\-]+|[\\w\\-]+(?:(?:\\s+[\\w\\-]+(?:\\s*=\\s*(?:\\\".*?\\\"|'.*?'|[^'\\\">\\s]+))?)+\\s*|\\s*)\\/?)>",tagname:"<(\\w+)",voids:["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],tableElems:["table","thead","tbody","tfoot","th","tr","td","colgroup","col","caption","figcaption"],cleanupTables:function(e){var i,name,elems=[].slice.call(e.children);for(i=0;i<elems.length;i++){if(elems[i].tagName){name=elems[i].tagName.toLowerCase();if(this.tableElems.indexOf(name)==-1){elems[i].outerHTML=""}else{if(["col","caption","figcaption","td","th"].indexOf(name)==-1){this.cleanupTables.call(this,elems[i])}}}}},handler:function(a){var tmp,passage,setter,e,isvoid,isstyle,lookaheadRegExp,lookaheadMatch,lookahead,re=new RegExp(this.tagname).exec(a.matchText),tn=re&&re[1]&&re[1].toLowerCase();if(tn&&tn!="html"){lookahead="<\\/\\s*"+tn+"\\s*>";isvoid=(this.voids.indexOf(tn)!=-1);isstyle=tn=="style"||tn=="script";lookaheadRegExp=new RegExp(lookahead,"mg");lookaheadRegExp.lastIndex=a.matchStart;lookaheadMatch=lookaheadRegExp.exec(a.source);if(lookaheadMatch||isvoid){if(isstyle){e=document.createElement(tn);e.type="text/css";tmp=a.source.slice(a.nextMatch,lookaheadMatch.index);e.styleSheet?(e.styleSheet.cssText=tmp):(e.innerHTML=tmp);a.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}else{e=document.createElement(a.output.tagName);e.innerHTML=a.matchText;while(e.firstChild){e=e.firstChild}if(!isvoid){a.subWikify(e,lookahead)}}if(e.tagName.toLowerCase()=="table"){this.cleanupTables.call(this,e)}if(setter=e.getAttribute("data-setter")){setter=Wikifier.linkFormatter.makeCallback(setter)}if(passage=e.getAttribute("data-passage")){if(tn!="img"){addClickHandler(e,Wikifier.linkFunction(Wikifier.parsePassageTitle(passage),e,setter));if(tn=="area"||tn=="a"){e.setAttribute("href","javascript:;")}}else{Wikifier.imageFormatter.importedImage(e,passage)}}a.output.appendChild(e)}else{throwError(a.output,"HTML tag '"+tn+"' wasn't closed.",a.matchText)}}}}];Wikifier.charSpanFormatter={name:"char",match:"[^\n]",handler:function(a){insertElement(a.output,"span",null,"char",a.matchText).setAttribute("data-char",a.matchText==" "?"space":a.matchText=="\t"?"tab":a.matchText)}};Wikifier.parsePassageTitle=function(title){if(title&&!tale.has(title)){try{title=(internalEval(this.parse(title))||title)+""}catch(e){}}return title};Wikifier.linkFunction=function(title,el,callback){return function(){if(state.rewindTo){var passage=findPassageParent(el);if(passage&&passage.parentNode.lastChild!=passage){state.rewindTo(passage,true)}}state.display(title,el,null,callback)}};Wikifier.createInternalLink=function(place,title,callback,type){var tag=(type=="button"?"button":"a"),suffix=(type=="button"?"Button":"Link"),el=insertElement(place,tag);if(tale.has(title)){el.className="internal"+suffix;if(visited(title)){el.className+=" visited"+suffix}}else{el.className="broken"+suffix}addClickHandler(el,Wikifier.linkFunction(title,el,callback));if(place){place.appendChild(el)}return el};Wikifier.createExternalLink=function(place,url,callback,type){var tag=(type=="button"?"button":"a"),el=insertElement(place,tag);el.href=url;el.className="external"+(type=="button"?"Button":"Link");el.target="_blank";if(typeof callback=="function"){addClickHandler(el,callback)}if(place){place.appendChild(el)}return el};function visited(e){var ret=0,i=0;if(!state){return 0
}e=e||state.history[0].passage.title;if(arguments.length>1){for(ret=state.history.length;i<arguments.length;i++){ret=Math.min(ret,visited(arguments[i]))}}else{for(;i<state.history.length&&state.history[i].passage;i++){if(e==state.history[i].passage.title){ret++
}}}return ret}function visitedTag(){var i,j,sh,ret=0,tags=Array.prototype.slice.call(arguments);if(tags.length==1&&typeof tags[0]=="string"){tags=tags.split(" ")}if(!state){return 0
}sh=state.history;for(i=0;i<sh.length&&sh[i].passage;i++){for(j=0;j<tags.length||void ret++;j++){if(sh[i].passage.tags.indexOf(tags[j])==-1){break
}}}return ret}var visitedTags=visitedTag;function turns(){return state.history.length-1}function passage(){return state.history[0].passage.title}function tags(e){var ret=[],i=0;if(!state){return 0
}e=e||state.history[0].passage.title;if(arguments.length>1){for(i=arguments.length-1;i>=1;i--){ret=ret.concat(tags(arguments[i]))}}ret=ret.concat(tale.get(e).tags);return ret}function previous(){if(state&&state.history[1]){for(var d=1;d<state.history.length&&state.history[d].passage;d++){if(state.history[d].passage.title!=state.history[0].passage.title){return state.history[d].passage.title}}}return""}function random(a,b){var from,to;if(!b){from=0;to=a}else{from=Math.min(a,b);to=Math.max(a,b)}to+=1;return ~~((Math.random()*(to-from)))+from}function either(){if(Array.isArray(arguments[0])&&arguments.length==1){return either.apply(this,arguments[0])}return arguments[~~(Math.random()*arguments.length)]}function parameter(n){n=n||0;if(macros.display.parameters[n]){return macros.display.parameters[n]}return 0}function bookmark(){return state.hash||"#"}function internalEval(s){return eval("0,"+s)}function scriptEval(s){try{eval(s.text)}catch(e){alert("There is a technical problem with this "+tale.identity()+" ("+s.title+": "+e.message+")."+softErrorMessage)}}window.onbeforeunload=function(){if(tale&&tale.storysettings.lookup("exitprompt",false)&&state&&state.history.length>1){return"You are about to end this "+tale.identity()+"."}};var oldOnError=window.onerror||null,softErrorMessage="You may be able to continue playing, but some parts may not work properly.";window.onerror=function(msg,a,b,c,error){var s=(error&&(".\n\n"+error.stack.replace(/\([^\)]+\)/g,"")+"\n\n"))||(" ("+msg+").\n");alert("Sorry to interrupt, but this "+((tale&&tale.identity&&tale.identity())||"page")+"'s code has got itself in a mess"+s+softErrorMessage.slice(1));window.onerror=oldOnError;if(typeof window.onerror=="function"){window.onerror(msg,a,b,c,error)}};var $;function main(){$=window.$||function(a){return(typeof a=="string"?document.getElementById(a):a)
};var imgs,scripts,macro,style,i,styleText="",passages=document.getElementById("passages");function sanityCheck(thing){var i,j,s="NOTE: The "+thing,checks={prerender:prerender,postrender:postrender,macros:macros};for(i in checks){if(Object.prototype.hasOwnProperty.call(checks,i)&&!sanityCheck[i]){if(!checks[i]||typeof checks[i]!="object"){alert(s+" seems to have corrupted the "+i+" object."+softErrorMessage);sanityCheck[i]=true;continue}if(i!="macros"){for(j in checks[i]){if(Object.prototype.hasOwnProperty.call(checks[i],j)&&typeof checks[i][j]!="function"){alert(s+" added a property '"+j+"' to "+i+", "+"which is a "+typeof checks[i][j]+", not a function."+softErrorMessage);sanityCheck[i]=true;break}}}}}if(!sanityCheck.display){if(History.prototype.display.length<4&&!~History.prototype.display.toString().indexOf("arguments")){alert(s+" contains a function that patches History.prototype.display, but takes the wrong number of arguments."+softErrorMessage)}sanityCheck.display=true}}if(!window.JSON||!document.querySelector){return(passages.innerHTML="This "+tale.identity()+" requires a newer web browser. Sorry.")}else{passages.innerHTML=""}tale=window.tale=new Tale();if(~document.documentElement.className.indexOf("lt-ie9")){imgs=tale.lookup("tags","Twine.image");for(i=0;i<imgs.length;i++){if(imgs[i].text.length>=32768){alert("NOTE: This "+tale.identity()+"'s HTML file contains embedded images that may be too large for this browser to display."+softErrorMessage);break}}}scripts=tale.lookup("tags","script");for(i=0;i<scripts.length;i++){scriptEval(scripts[i]);sanityCheck('script passage "'+scripts[i].title+'"')}state=window.state=new History();for(i in macros){macro=macros[i];if(typeof macro.init=="function"){macro.init();sanityCheck('init() of the custom macro "'+i+'"')}}style=document.getElementById("storyCSS");for(i in tale.passages){i=tale.passages[i];if(i.tags.indexOf("stylesheet")==-1){continue
}if(i.tags+""=="stylesheet"){styleText+=i.text}else{if(i.tags.length==2&&i.tags.indexOf("transition")>-1){setTransitionCSS(i.text)}}}styleText=alterCSS(styleText);style.styleSheet?(style.styleSheet.cssText=styleText):(style.innerHTML=styleText);state.init()}setTimeout(function f(){var size,bar=document.getElementById("loadingbar"),store=document.getElementById("storeArea");if(!bar){return
}if(store){size=store.getAttribute("data-size");if(store.children.length<=size&&!tale){bar.style.width=~~((store.children.length+1)/size*100)+"%"}else{bar.outerHTML="";return}}setTimeout(f,5)},5);

var hasPushState=!!window.history&&(typeof window.history.pushState=="function")&&(function(a){try{a.setItem("test","1");a.removeItem("test");return true}catch(e){return false
}}(window.sessionStorage));Tale.prototype.canBookmark=function(){return this.canUndo()&&!this.storysettings.lookup("hash")&&(this.storysettings.lookup("bookmark",true)||!hasPushState)};History.prototype.init=function(){var a=this;if(!this.restore()){if(tale.has("StoryInit")){new Wikifier(insertElement(null,"span"),tale.get("StoryInit").text)}this.display("Start",null)}if(!hasPushState){this.hash=window.location.hash;this.interval=window.setInterval(function(){a.watchHash()},250)}};hasPushState&&(History.prototype.pushState=function(replace,uri){window.history[replace?"replaceState":"pushState"]({id:this.id,length:this.history.length},document.title,uri)});History.prototype.display=function(title,source,type,callback){var i,e,q,bookmark,hash,c=tale.get(title),p=document.getElementById("passages");if(c==null){return
}if(type!="back"){this.saveVariables(c,source,callback);hash=(tale.storysettings.lookup("hash")&&this.save())||"";if(hasPushState&&tale.canUndo()){try{sessionStorage.setItem("Twine.History"+this.id,JSON.stringify(decompile(this.history)));this.pushState(this.history.length<=2&&window.history.state=="",hash)}catch(e){alert("Your browser couldn't save the state of the "+tale.identity()+".\n"+"You may continue playing, but it will no longer be possible to undo moves from here on in.");tale.storysettings.undo="off"}}}this.hash=hash||this.save();e=c.render();if(type!="quietly"){if(hasTransition){for(i=0;i<p.childNodes.length;i+=1){q=p.childNodes[i];q.classList.add("transition-out");setTimeout((function(a){return function(){if(a.parentNode){a.parentNode.removeChild(a)}}}(q)),1000)}e.classList.add("transition-in");setTimeout(function(){e.classList.remove("transition-in")},1);e.style.visibility="visible";p.appendChild(e)}else{removeChildren(p);p.appendChild(e);fade(e,{fade:"in"
})}}else{p.appendChild(e);e.style.visibility="visible"}tale.setPageElements();if(tale.canUndo()){if(!hasPushState&&type!="back"){window.location.hash=this.hash}else{if(tale.canBookmark()){bookmark=document.getElementById("bookmark");bookmark&&(bookmark.href=this.hash)}}}window.scroll(0,0);return e};History.prototype.watchHash=function(){if(window.location.hash!=this.hash){if(window.location.hash&&(window.location.hash!="#")){this.history=[{passage:null,variables:{}}];removeChildren(document.getElementById("passages"));if(!this.restore()){alert("The passage you had previously visited could not be found.")}}else{window.location.reload()}this.hash=window.location.hash}};History.prototype.loadLinkVars=function(){for(var c in this.history[0].linkVars){this.history[0].variables[c]=clone(this.history[0].linkVars[c])}};Passage.prototype.render=function(){var b=insertElement(null,"div","passage"+this.title,"passage");b.style.visibility="hidden";this.setTags(b);this.setCSS();insertElement(b,"div","","header");var a=insertElement(b,"div","","body content");for(var i in prerender){(typeof prerender[i]=="function")&&prerender[i].call(this,a)}new Wikifier(a,this.processText());insertElement(b,"div","","footer");for(i in postrender){(typeof postrender[i]=="function")&&postrender[i].call(this,a)}return b};Passage.prototype.excerpt=function(){var b=this.text.replace(/<<.*?>>/g,"");b=b.replace(/!.*?\n/g,"");b=b.replace(/[\[\]\/]/g,"");var a=b.split("\n");while(a.length&&a[0].length==0){a.shift()}var c="";if(a.length==0||a[0].length==0){c=this.title}else{c=a[0].substr(0,30)+"..."}return c};Passage.transitionCache="";Passage.prototype.setCSS=function(){var trans=false,text="",tags=this.tags||[],c=document.getElementById("tagCSS"),c2=document.getElementById("transitionCSS");if(c&&c.getAttribute("data-tags")!=tags.join(" ")){tale.forEachStylesheet(tags,function(passage){if(~passage.tags.indexOf("transition")){if(!Passage.transitionCache&&c2){Passage.transitionCache=c2.innerHTML}setTransitionCSS(passage.text);trans=true}else{text+=alterCSS(passage.text)}});if(!trans&&Passage.transitionCache&&c2){setTransitionCSS(Passage.transitionCache);trans=false;Passage.transitionCache=""}c.styleSheet?(c.styleSheet.cssText=text):(c.innerHTML=text);c.setAttribute("data-tags",tags.join(" "))}};var Interface={init:function(){var snapback=document.getElementById("snapback"),restart=document.getElementById("restart"),bookmark=document.getElementById("bookmark");main();if(!tale){return
}if(snapback){if(!tale.lookup("tags","bookmark").length){snapback.parentNode.removeChild(snapback)}else{addClickHandler(snapback,Interface.showSnapback)}}if(bookmark&&(!tale.canBookmark()||!hasPushState)){bookmark.parentNode.removeChild(bookmark)}restart&&addClickHandler(restart,Interface.restart)},restart:function(){if(confirm("Are you sure you want to restart this "+tale.identity()+"?")){state.restart()}},showSnapback:function(a){Interface.hideAllMenus();Interface.buildSnapback();Interface.showMenu(a,document.getElementById("snapbackMenu"))},buildSnapback:function(){var b,c=false,menuelem=document.getElementById("snapbackMenu");while(menuelem.hasChildNodes()){menuelem.removeChild(menuelem.firstChild)}for(var a=state.history.length-1;a>=0;a--){if(state.history[a].passage&&state.history[a].passage.tags.indexOf("bookmark")!=-1){b=document.createElement("div");b.pos=a;addClickHandler(b,function(){return macros.back.onclick(true,this.pos)});b.innerHTML=state.history[a].passage.excerpt();menuelem.appendChild(b);c=true}}b=null;if(!c){b=document.createElement("div");b.innerHTML="<i>No passages available</i>";document.getElementById("snapbackMenu").appendChild(b)}},hideAllMenus:function(){document.getElementById("snapbackMenu").style.display="none"},showMenu:function(b,a){if(!b){b=window.event}var c={x:0,y:0};if(b.pageX||b.pageY){c.x=b.pageX;c.y=b.pageY}else{if(b.clientX||b.clientY){c.x=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;c.y=b.clientY+document.body.scrollTop+document.documentElement.scrollTop}}a.style.top=c.y+"px";a.style.left=c.x+"px";a.style.display="block";addClickHandler(document,Interface.hideAllMenus);b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}}};window.onload=Interface.init;macros.back.onclick=function(back,steps){var title;if(back){if(tale.canUndo()){window.history.go(-steps);return}while(steps-->=0&&state.history.length>1){title=state.history[0].passage.title;state.history.shift()}state.loadLinkVars();state.saveVariables(tale.get(title));state.display(title,null,"back")}else{state.display(state.history[steps].passage.title)}};window.onpopstate=function(e){var title,hist,steps,i,s=e&&e.state;if(s&&s.id&&s.length!=null){hist=recompile(JSON.parse(sessionStorage.getItem("Twine.History"+s.id)));if(hist){steps=hist.length-s.length}}if(steps!=null){state.history=hist;while(steps-->=0&&state.history.length>1){title=state.history[0].passage.title;state.history.shift()}state.loadLinkVars();state.saveVariables(tale.get(title));state.display(title,null,"back")}};

testplay = "";

}());
</script>
<script title="modules">


</script>
<style id="baseCSS">
/* Sidebar */
#sidebar {
	position: fixed;
	list-style: none;
	width: 12em;
}
#sidebar #title, #sidebar #credits  {
	cursor: auto;
}
#sidebar #storySubtitle, #sidebar #storyMenu {
	display: block;
}
.menu {
	position: absolute;
	display: none;
	z-index: 5;
}
/* Passages container */
#passages {
	margin-left: 18.2em;
	position:relative;
}
/* Links */
.passage a {
	color: #4d6ad8;
}
a.internalLink, a.externalLink, a.back, a.return, [data-passage], .menu div {
	cursor: pointer;
}
a.brokenLink {
	background-color: red;
	color: #000;
}
.marked {
	background-color: #f66;
	color: #000;
}
.marked[title] {
	cursor: help;
}
.passage li[data-bullet] {
	list-style-type: none;
}
.passage li[data-bullet]:before {
	content: attr(data-bullet);
	position: relative;
	left: -1em;
}
#storeArea {
	display: none;
}
#noscript {
	margin-left: 18.2em;
	font-size: 1.2em;
	font-weight: bold;
}
/* HTML4 compatibility */
img {
	vertical-align:bottom;
}
@media screen and (max-width: 640px) {
	#sidebar {
		position: static;
		margin: 0 auto;
		padding: 0;
	}
	body #sidebar li  {
		text-align: center;
	}
	#passages {
		min-height: 100vh;
		margin-left: 0em;
	}
}
#loadingbar {
	position:fixed;
	top:0;
	left:0;
	border-top: solid #4d6ad8 6px;
	transition: width 0.5s;
}
</style>
<style id="defaultCSS">
body {
	background-color: #000;
	color: #fff;
	font-family: Verdana,sans-serif;
	font-size: 62.5%;
	margin: 4em 15% 5% 5em;
}
#sidebar {
	left: 7.5em;
	margin: 0;
	padding: 0 1em 0 0;
	font: bold 1.1em Verdana,sans-serif;
}
#sidebar ul {
	padding: 0;
}
#sidebar li {
	color: #333;
	text-align: right;
	background-repeat: no-repeat;
	margin-bottom: 1em;
	line-height: 1.4em;
	list-style: none;
}
#sidebar li a {
	color: #333;
	text-decoration: none;
}
#sidebar li a:hover, #sidebar #title a:hover, #snapback:hover, #restart:hover {
	color: #fff;
	cursor: pointer;
	text-decoration: none;
}
#sidebar #title {
	font-size: 150%;
}
#sidebar #title, #sidebar #title:hover, #sidebar #title a {
	color: #999;
}
#sidebar #storySubtitle {
	font-size: 75%;
}
#storyAuthor {
	font-size: 50%;
}
#sidebar #storyMenu {
	line-height: 2.5em;
	margin-bottom: .5em;
	color: #999;
	cursor: auto;
}
#sidebar #credits {
	padding-top: 2em;
	font-weight: normal;
	font-size: 80%;
}
#sidebar #credits:hover {
	color: #333;
}
#sidebar #credits a {
	text-decoration: none;
}
#passages {
	border-left: 1px solid #333;
	padding-left: 1.5em;
}
.menu {
	background-color: #343434;
	color: #fff;
	opacity: .9;
	border: 1px solid #fff;
	text-align: left;
	font: 1.1em Verdana;
	line-height: 2em;
}
.menu div {
	padding: 0 .4em;
}
.menu div:hover {
	cursor: pointer;
	background-color: #fff;
	color: #343434;
}
.passage {
	font-size: 1.2em;
	line-height: 175%;
	margin-bottom: 2em;
	text-align: left;
}
.passage a {
	font-weight: bold;
	text-decoration: none;
}
.passage a:hover {
	color: #8ea6ff;
	text-decoration: underline;
}
.content > ul {
	padding-top: 1.3em;
}
.passage ul, .passage ol {
	margin-left: .5em;
	padding-left: 1.5em;
}
.passage li {
	margin-right: 6em;
}
.passage table {
	border-collapse: collapse;
	font-size: 100%;
	margin: .8em 1.0em;
}
.passage th,.passage td,.passage tr,.passage caption {
	padding: 3px;
}
.passage hr {
	height: 1px;
}
.passage center {
	max-width:50%;
	margin:auto;
}
.marked {
	margin-right: 12px;
	padding: 3px;
}
.disabled {
	font-weight: bold;
	color: #333;
}
@media screen and (max-width: 640px) {
	body {
		margin: 5%;
	}
	#sidebar {
		width:100%;
		margin: 0;
		border-bottom: 1px solid #333;
	}
	#passages {
		padding-top: 2em;
		border-left: 0;
	}
}
</style>
<style id="transitionCSS">
.transition-in {
	opacity:0;
	position:absolute;
}
.passage:not(.transition-out) {
	transition: 1s;
	-webkit-transition: 1s;
}
.transition-out {
	opacity:0 !important;
	position:absolute;
}
</style>
<style id="storyCSS"></style>
<style id="tagCSS"></style>
</head>
<body>
<div id="loadingbar"></div>
<ul id="sidebar">
<li id="title" class="storyElement"><span id="storyTitle" class="storyElement"></span><span id="storySubtitle" class="storyElement"></span><span id="titleSeparator"></span><span id="storyAuthor" class="storyElement"></span></li>
<li id="storyMenu" class="storyElement" style="display:none"></li>
<li><a href="javascript:;" id="snapback">Rewind</a></li>
<li><a href="javascript:;" id="restart">Restart</a></li>
<li><a id="bookmark" title="Permanent link to this passage">Bookmark</a></li>
<li id="credits">
This story was created with <a href="http://twinery.org/">Twine</a> and is powered by <a href="http://tiddlywiki.com/">TiddlyWiki</a>
</li>
</ul>
<div id="snapbackMenu" class="menu"></div>
<div id="passages">
<noscript><div id="noscript">Please enable Javascript to play this story!</div></noscript>
<style>
#sidebar{display:none;}
</style>
</div>
<div id="storeArea" data-size="143" hidden><div tiddler="BeachAwake" tags="" created="201606201926" modifier="twee" twine-position="1940,945">The sound of the surf, and the warmth of the sun and sand, lulls you to sleep&lt;&lt;if $lucid&gt;&gt;--but then you remember you're already dreaming&lt;&lt;else&gt;&gt;. You almost remember something&lt;&lt;endif&gt;&gt;.\n\n&lt;&lt;set $from to &quot;Nap&quot;&gt;&gt;&lt;&lt;Beach&gt;&gt;/% TODO: go somewhere else? %/</div><div tiddler="ForestStair" tags="" created="201501111646" modifier="twee" twine-position="317,769">After a bit of tugging the door reluctantly opens, and you duck through to the base of a cold, stone stairway. Some distance up, a warm light glimmers.\n\nA short climb later, you reach the light.  It's shining from a crack around a large, square door.  Behind you the stone stairs descend into darkness; the sparse light where you're standing is the only illumination.\n\n[[open the door|Basement][$rushed = 0]]</div><div tiddler="PitTalk" tags="" created="201501111844" modifier="twee" twine-position="1341,313">&lt;&lt;set $ignoring to 1&gt;&gt;The &lt;&lt;$boy&gt;&gt; turns to look at you with a smile, then suddenly frowns in disgust.\n\n&quot;What are //you// doing here?&quot; &lt;&lt;$he&gt;&gt; says, pointedly looking over your naked body. &quot;These aren't your showers.&quot;\n\n[[apologize|PitDisdain]]\n[[leave|Showers]]\n[[talk with &lt;&lt;$him&gt;&gt;|PitDisdain]]</div><div tiddler="LoftPlay" tags="" created="201602021533" modifier="twee" twine-position="1021,1066">You make yourself comfortable next to the &lt;&lt;$boy&gt;&gt; and take the controller as &lt;&lt;$he&gt;&gt; explains the rules.  They seem a little complicated, but manageable.\n\nThen the game starts, and you can barely keep up--colors and shapes you don't understand flash across the screen, along with seemingly random numbers and sound effects.  The &lt;&lt;$boy&gt;&gt; next to you tries to explain the modifiers, bonuses and power-ups as you play, but they are coming too quickly to mention them all, and it isn't helping your concentration.  After just a few minutes, the game is over--you've lost.&lt;&lt;set $played to 1&gt;&gt;\n\n[[try again|LoftPersist]]\n[[give up|LoftResign]]</div><div tiddler="BedroomStrip" tags="" created="201701161921" modifier="twee" twine-position="377,1091">Slowly, hands barely shaking, you remove your clothes and pile them on the floor.\n\nYou notice your heart beating.&lt;&lt;set $stripped to 1&gt;&gt;\n\n[[look|Bedroom]]</div><div tiddler="LoftStare" tags="" created="201606212101" modifier="twee" twine-position="1024,1347">You watch a while longer.  As your hopes of actually understanding the game fade, your attention turns to the &lt;&lt;$boy&gt;&gt;s.  The two of them have a close, easy rapport, laughing at in-jokes, teasing and jostling each other when they score.  It almost seems like they're watching each other more than the game.\n\nThe bare skin of their backs has a soft blue halo from the light of the television screen.&lt;&lt;set $played to 4&gt;&gt;\n\n[[keep watching|LoftCreep]]\n[[leave|House]]</div><div tiddler="FirstExit" tags="" created="201501081835" modifier="twee" twine-position="853,130">You walk back into the forest, the strange sense of artificiality returning as you do.  You hadn't realized it had gone.\n\nYou notice you can't hear any birds.  Then you notice you can't hear the rustling of the leaves, though the breeze is plainly moving them.  The forest looks and feels real, but apart from the ever-present rushing of the stream it is completely noiseless.\n\n&lt;&lt;South&gt;&gt;</div><div tiddler="LitRoom" tags="" created="201606222046" modifier="twee" twine-position="2675,448">&lt;&lt;set $lit to &quot;seen&quot;&gt;&gt;[silhouettes behind the glass; no sound]\n\n[[knock|LitKnock]]\n[[go back|RoomsScrap]]</div><div tiddler="ConversationIntro" tags="" created="201501182056" modifier="twee" twine-position="1431,1297">Gathering your courage, you take a breath and leap through the waterfall to the other side.  Your flailing feet meet only air for half a second, then suddenly find purchase, sending you tumbling to the ground.\n\nAfter catching your breath, you look up and see that the cause of your fall was a set of three stairs leading down into the soft, carpeted area in which you now lie.  Along the edge of the room is a cozy-looking ledge for sitting, with glass walls on each side, and the interior is scattered with plush, colorful cushions and pillows.  Across from the entrance is a narrow hall leading to another room, identical to the one you're in except for its spectacular view of the green, breezy forest far below.\n\n&lt;&lt;if $cold&gt;&gt;You suddenly notice that your entrance has left you soaking wet from head to toe, and as the water slowly drips off your naked body it takes the warmth of the stairways with it.  You begin to shiver.&lt;&lt;else&gt;&gt;You look back at the sheet of water covering the entrance.  The carpet is dry, and so is your skin.  You feel warm and comfortable.&lt;&lt;endif&gt;&gt;\n\n[[sit up|Conversation]]</div><div tiddler="BatheStarer" tags="" created="201705212017" modifier="twee" twine-position="701,1855">You smile a little and lift your eyes again.  The two of you admire each other for a while.\n\nYour heart is beating hard and your spine is tingling&lt;&lt;if $relaxed&gt;&gt;, yet you're fully relaxed&lt;&lt;else&gt;&gt;. Your legs are tired and cramped.&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;if $relaxed&gt;&gt;[[rest|BatheWash]]&lt;&lt;else&gt;&gt;[[fidget|BatheWash]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Impress" tags="" created="201603280023" modifier="twee" twine-position="1836,172">You start swimming hard after the two &lt;&lt;$boy&gt;&gt;s, as though to catch them.  They laugh and turn away, staying only inches ahead of you, though you can tell they're not really trying.  After a little while, the &lt;&lt;$boy&gt;&gt; who invited you in falls just a little too far behind, enough for you to reach out and grab hold of &lt;&lt;$his&gt;&gt; foot.\n\n&lt;&lt;if not $cold&gt;&gt;As you do, the &lt;&lt;$boy&gt;&gt; suddenly turns on you and pounces, a mischevious grin on &lt;&lt;$his&gt;&gt; face. &lt;&lt;endif&gt;&gt;The room goes completely dark in an instant.\n\nYou pause for a moment, straining your eyes and ears, but you can't see a thing and the only sounds are the echoes of splashing water.\n\n[[wait|LightsOut][$from = &quot;impress&quot;]]</div><div tiddler="StairsToOcean" tags="" created="201602012114" modifier="twee" twine-position="1603,919">You make your way up the flooded stairway.  The shimmering light grows brighter as you ascend, and the cascading sheets of water turn to a deluge.  Before long you're wading waist-deep, drenched by the incessant flow, almost swimming up the endless flights of glass.\n\nEventually, you're surrounded by so much flowing, splashing water you can barely breathe--yet the torrent feels soft and thick against your skin.  Almost thick enough to swim in.\n\nThe light from above is blindingly bright.  You can't see any farther.\n\n[[turn back|MiddleStairs][$from = &quot;above&quot;]]\n[[swim|Ocean][$from = &quot;stairs&quot;]]</div><div tiddler="Somewhere" tags="" created="202303220125" modifier="twee" twine-position="165,155">&lt;&lt;if $likes is &quot;boys&quot;&gt;&gt;&lt;&lt;set $boy = &quot;boy&quot;; $girl = &quot;girl&quot;; $Boy = &quot;Boy&quot;; $Girl = &quot;Girl&quot;; $he = &quot;he&quot;; $she = &quot;she&quot;; $He = &quot;He&quot;; $She = &quot;She&quot;; $him = &quot;him&quot;; $her = &quot;her&quot;; $Him = &quot;Him&quot;; $Her = &quot;Her&quot;; $his = &quot;his&quot;; $shis = &quot;her&quot;; $His = &quot;His&quot;; $Shis = &quot;Her&quot;; $whis = &quot;his&quot;; $hers = &quot;hers&quot;; $Whis = &quot;His&quot;; $Hers = &quot;Hers&quot;&gt;&gt;\s\n&lt;&lt;else&gt;&gt;&lt;&lt;set $boy = &quot;girl&quot;; $girl = &quot;boy&quot;; $Boy = &quot;Girl&quot;; $Girl = &quot;Boy&quot;; $he = &quot;she&quot;; $she = &quot;he&quot;; $He = &quot;She&quot;; $She = &quot;He&quot;; $him = &quot;her&quot;; $her = &quot;him&quot;; $Him = &quot;Her&quot;; $Her = &quot;Him&quot;; $his = &quot;her&quot;; $shis = &quot;his&quot;; $His = &quot;Her&quot;; $Shis = &quot;His&quot;; $whis = &quot;hers&quot;; $hers = &quot;his&quot;; $Whis = &quot;Hers&quot;; $Hers = &quot;His&quot;&gt;&gt;&lt;&lt;endif&gt;&gt;\s\n&lt;&lt;set $destination to either(&quot;Forest&quot;, &quot;House&quot;, &quot;Showers&quot;)&gt;&gt; /% Baths, Garden... Museum? What else? %/\s\n&lt;&lt;display $destination&gt;&gt;</div><div tiddler="Awake" tags="awake" created="201602022108" modifier="twee" twine-position="2028,1660">You're lying in your bed, heavy with dreaming.\s\n&lt;&lt;if $cold or $burned&gt;&gt;  The sheets are cold and clammy with sweat&lt;&lt;if $burned&gt;&gt;, but you're still hot&lt;&lt;endif&gt;&gt;.&lt;&lt;else&gt;&gt;  You're comfortable and warm.&lt;&lt;endif&gt;&gt;\n/% TODO: Add clause for $burned or $company? Replace $dark/$alone with $company? %/\nSomewhere outside, &lt;&lt;if visited(&quot;Start&quot;) &lt; 3&gt;&gt;crickets&lt;&lt;else&gt;&gt;birds&lt;&lt;endif&gt;&gt; are singing.\n\n&lt;&lt;if visited(&quot;Start&quot;) &gt;= 4&gt;&gt;The sun has risen.  Another day.\n\n[[Night's end.|Credits][$end = 1]]\s\n\s\n&lt;&lt;else&gt;&gt;&lt;&lt;if visited(&quot;Start&quot;) is 1&gt;&gt;It's the middle of the night.&lt;&lt;else if visited(&quot;Start&quot;) is 2&gt;&gt;Dawn is hours away.&lt;&lt;else if visited(&quot;Start&quot;) is 3&gt;&gt;The sun hasn't risen yet.&lt;&lt;else&gt;&gt;If you can read this, either you or the author has done something very wrong. (&lt;&lt;print visited(&quot;Start&quot;)&gt;&gt;)&lt;&lt;endif&gt;&gt;  You should go back to sleep.\n\n[[Eyes shut.|Start]]&lt;&lt;endif&gt;&gt;</div><div tiddler="StoryTitle" tags="" created="201501042151" modifier="twee" twine-position="10,10">Adrift</div><div tiddler="LoftResign" tags="" created="201603301939" modifier="twee" twine-position="1178,1204">You pass the controller back, joking that maybe you just aren't cut out for this type of game.  The two &lt;&lt;$boy&gt;&gt;s try to be nice--&quot;Just watch for a bit if you like,&quot; one of them says, &quot;I'm sure you'll figure it out&quot;--but you can tell they're relieved to be playing with each other again.\n\n[[watch them play|LoftWatch][$from = &quot;loft&quot;]]\n[[leave|House]]</div><div tiddler="FireNap" tags="" created="201603281858" modifier="twee" twine-position="839,919">The light and warmth of the fire are soothing, almost hypnotic.  You struggle to keep your eyes open.  You feel like you've forgotten something...\n\n[[remember|FireToLobby]]</div><div tiddler="Pool" tags="" created="201501092307" modifier="twee" twine-position="1676,20">The air here is cool and just a little humid, but not uncomfortable.  On the near side of the room a narrow staircase leads down out from the wall.\n\n&lt;&lt;if $swimming&gt;&gt;Two younger &lt;&lt;$boy&gt;&gt;s are doing laps in the pool, pausing now and then to show off and fool around. They're not wearing swimsuits, just swimming naked.\n\nOne of them notices you standing by the pool and smiles, motioning you to join them.&lt;&lt;else&gt;&gt;Two younger &lt;&lt;$boy&gt;&gt;s are standing next to the pool, completely naked.  They turn to look at you as you enter, and one of them smiles.\n\n&quot;Hey,&quot; &lt;&lt;$he&gt;&gt; says.  &quot;Want to swim with us?&quot;&lt;&lt;endif&gt;&gt;\n\n[[join them|Laps]]\n[[go down the stairs|Excused][$dest = &quot;Showers&quot;]]</div><div tiddler="PoolToTunnels" tags="" created="201611052052" modifier="twee" twine-position="2116,493">blah\n\n&lt;&lt;Tunnels&gt;&gt;</div><div tiddler="ConversationIgnored" tags="" created="201501191618" modifier="twee" twine-position="1593,1157">You try tapping on the glass and waving, to see if they will let you in.  The &lt;&lt;$boy&gt;&gt; glances at you for a moment, but makes no move to get up, and doesn't look your way again.  Your calls and shouts go ignored or unheard.  You can't get them to blink, let alone stand up and let you in.  They just keep talking and laughing.\n\n[[leave|MiddleStairs][$from = &quot;people&quot;]]</div><div tiddler="Upstream" tags="" created="201501042153" modifier="twee" twine-position="694,179">You follow the stream for a minute or so before arriving at a long wall made of glass.\n\n[[look|South]]</div><div tiddler="ForestDoor" tags="" created="201501101932" modifier="twee" twine-position="142,767">&lt;&lt;if $dazed&gt;&gt;Forever ends.\n\n&lt;&lt;else&gt;&gt;After walking for what feels like miles, something unusual catches your eye.\n\n&lt;&lt;endif&gt;&gt;At the base of one of the endless, identical trees is a wooden door, about chest height, with a silvery arched frame.  A tarnished handle beckons.\n\nYou suddenly recall you haven't heard the stream for some time.  You turn your head to listen, and realize you have no idea which direction you came from.\n\nThe sound of the stream is gone.  You are lost.\n\n[[try the handle|ForestStair]]</div><div tiddler="Ignoring" tags="" created="201501112000" modifier="twee" twine-position="1487,454">The &lt;&lt;$boy&gt;&gt; from before is still washing &lt;&lt;$him&gt;&gt;self, back turned.\n\n[[get &lt;&lt;$his&gt;&gt; attention|Ignored]]\n[[leave|Showers]]</div><div tiddler="LobbyLook" tags="" created="201606222006" modifier="twee" twine-position="1011,300">You wander around the lobby, pausing to admire the view of the ocean.  A sliding glass door leads out. It looks like perfect weather for a swim.\n\nThere's a stairway set into the wall, next to the counter.  A sign above the stairway says, &quot;GARDEN&quot;.\n\nOn top of the unattended counter is a small bell.\n\n[[take the stairs|LobbyStair]]\n[[ring the bell|LobbyWait]]\n&lt;&lt;if visited(&quot;LobbyWait&quot;)&gt;&gt;[[climb the counter|LobbyClimb]]\n&lt;&lt;endif&gt;&gt;[[go outside|Beach][$from=&quot;Lobby&quot;]]\n[[go down the hall|InsideFollow][$from=&quot;Lobby&quot;]]</div><div tiddler="Conversation" tags="" created="201501111838" modifier="twee" twine-position="1433,1433">You sit up.  In the room across from yours, an older &lt;&lt;$boy&gt;&gt; and a &lt;&lt;$girl&gt;&gt; about your age are deep in conversation.&lt;&lt;if visited(&quot;ShowerPit&quot;)&gt;&gt;  After a moment, you recognize the &lt;&lt;$boy&gt;&gt; as the one from the showers.&lt;&lt;endif&gt;&gt;\n\nThe &lt;&lt;$girl&gt;&gt; is resting with &lt;&lt;$shis&gt;&gt; head on the &lt;&lt;$boy&gt;&gt;'s lap, talking and gesturing as &lt;&lt;$she&gt;&gt; tells some story or other.  &lt;&lt;$He&gt;&gt; nods as &lt;&lt;$he&gt;&gt; listens, only looking at &lt;&lt;$her&gt;&gt; occasionally, but with an interested smile on &lt;&lt;$his&gt;&gt; face.  As you watch, &lt;&lt;$he&gt;&gt; puts &lt;&lt;$his&gt;&gt; head back and laughs hugely.  The &lt;&lt;$girl&gt;&gt; smiles.  Though the hall leading to their room is only a few feet long, you can't hear anything they're saying.\n\nThey don't seem to notice you.\n\n[[join them|ConversationBlock]]\n[[go back|MiddleStairs][$from = &quot;people&quot;]]</div><div tiddler="TakeAShower" tags="" created="201501111821" modifier="twee" twine-position="1178,165">&lt;&lt;if $cold&gt;&gt;You walk under one of the steaming taps, only to find that the water is frigid.  You quickly step back out, shivering.\n\nDespite the cold water, the air around you is still warm.&lt;&lt;else&gt;&gt;You walk under one of the running taps and find that it's the perfect temperature.  The water massages and slips over your skin, its heat permeating your body, relaxing and energizing you from the tips of your fingers to the center of your chest.  You feel calm, alert and alive.&lt;&lt;endif&gt;&gt;&lt;&lt;set $showering to 1&gt;&gt;\n\n[[look around|Showers]]</div><div tiddler="ShowerPit" tags="" created="201501111821" modifier="twee" twine-position="1340,169">&lt;&lt;if $cold&gt;&gt;You climb the stairs into the pit and see four unoccupied taps, one of them running.  The water coming from the tap is freezing cold.\n\n[[go back out|Showers]]&lt;&lt;else&gt;&gt;You climb the stairs into the pit and see a naked &lt;&lt;$boy&gt;&gt;, a little older than you, washing &lt;&lt;$him&gt;&gt;self under one of the taps.  &lt;&lt;$He&gt;&gt; doesn't seem to notice you.\n\n[[get &lt;&lt;$his&gt;&gt; attention|PitTalk]]\n[[take a shower|PitTalk]]\n[[go back out|Showers]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Ignored" tags="" created="201501111913" modifier="twee" twine-position="1342,595">You try again to get &lt;&lt;$his&gt;&gt; attention, but no matter what you say &lt;&lt;$he&gt;&gt; doesn't react.  It's like &lt;&lt;$he&gt;&gt; can't even hear you.\n\n[[leave|Showers]]\n[[grab &lt;&lt;$him&gt;&gt;|Grab]]</div><div tiddler="BatheStare" tags="" created="201705212002" modifier="twee" twine-position="554,1743">You stare at the &lt;&lt;$boy&gt;&gt; for a while.  &lt;&lt;$He&gt;&gt; really is gorgeous.\n\nYou suddenly notice the &lt;&lt;$boy&gt;&gt; staring back at you and drop your eyes.  &lt;&lt;$He&gt;&gt; laughs.\n\n&quot;It's all right,&quot; &lt;&lt;$he&gt;&gt; says, &quot;you can look.  I've been looking, too.&quot;\n\n[[stare|BatheStarer]]\n[[rest|BatheWash]]</div><div tiddler="ShowersToPool" tags="" created="201501111821" modifier="twee" twine-position="1511,22">/% Set $dark to 0? %/The stairs are dark and humid, just wide enough for one person.  As you ascend, the steam grows thinner and the tiles under your feet grow cool.  &lt;&lt;if $dark&gt;&gt;After turning once on a narrow landing, the stair grows steadily darker; you're forced to take the last few steps by feel.&lt;&lt;else&gt;&gt;You turn once on a narrow landing, then emerge a little while later into a large open room.&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;if $dark&gt;&gt;[[look|LightsOut][$from = &quot;showers&quot;]]\s\n&lt;&lt;else&gt;&gt;[[look|Pool]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Attic" tags="" created="201610291937" modifier="twee" twine-position="81,1223">[tiny bay window with plush seats and a little table, with a mug of something good to drink (still steaming). Cramped everything, but cozy. Outside the window: rain, twilight.\n\nSpiral stairs down, steep stairs up(, hallway to creaky old door?)]\n\n/%You're in a dim, cramped hallway lined with dozens of shelves and drawers of every size and shape.  The shelves are stuffed with trinkets, knick knacks, and all kinds of books.\n\nThe hallway splits in two at one end, with a short riser of stairs going up to one hall and down to the other.  At the opposite end of the hall is a descending spiral stair.%/\n\n[[open a drawer|AtticDrawer]]\n[[examine a shelf|AtticShelf]]\n/%sit, drink, look out the window, etc.%/\n[[go up the stairs|AtticToMuseum]]\n[[take the hallway|AtticToMuseum]] /% to...tunnels? room?%/\n[[go down the stairs|HouseToAttic]]</div><div tiddler="PoolToShowers" tags="" created="201504171945" modifier="twee" twine-position="1513,160">&lt;&lt;if $dark&gt;&gt;Shouldn't happen! [You carefully make your way to the darkened stairs and begin walking.  The light grows as you descend, along with the heat and steam, and the way becomes easier.]&lt;&lt;else&gt;&gt;You quickly descend the long, narrow staircase, the heat and steam growing thicker with each step.&lt;&lt;endif&gt;&gt;  Before long, you emerge into the heavy fog of the showers.\n\n[[look|Showers]]</div><div tiddler="WalkwayCross" tags="" created="201501182020" modifier="twee" twine-position="1428,1159">Carefully, you begin making your way across the slippery glass.  The walkway narrows as you go, compunding the difficulty of balancing.  The last few feet are a sliver too sharp to walk on.  Your only choice is to jump through the falling water to the other side.\n\n[[jump|ConversationIntro]]\n[[turn back|MiddleStairs][$from = &quot;people&quot;]]</div><div tiddler="House" tags="" created="201501111658" modifier="twee" twine-position="701,760">&lt;&lt;set $stripped to 0&gt;&gt;\s\nYou're in a small, cozy home.\n\nThe windows are black with night outside, but drifting pinpricks of light suggest snow.  The room is lit and warmed by a firepit in the center, recessed into the floor and ringed with soft cushions.\n\nTo one side of the firepit is a ladder that runs up from a hole in the floor and through an identical hole in the ceiling.  Across from the ladder, against one wall, a wooden spiral stair climbs up and disappears through a different spot.  Farther from the fire is nothing of consequence.\n\nOn the opposite side of the firepit, a gauzy curtain runs nearly the whole width of the room.  Where the curtain stops you see a dresser, a bottom drawer pulled open.  Behind the curtain you can just make out the silhouette of a large four-post bed, illuminated by a light coming from a half-open door. You hear the faint sound of running water.\n\n[[sit by the fire|Fireplace]]\n[[look behind the curtain|Bedroom]]\n[[climb down the ladder|Basement]]\n&lt;&lt;if $played is 4&gt;&gt;[[climb up the ladder|LoftRegret]]&lt;&lt;else if $played &gt; 0&gt;&gt;[[climb up the ladder|LoftWatch][$from = &quot;house&quot;]]&lt;&lt;else&gt;&gt;[[climb up the ladder|Loft]]&lt;&lt;endif&gt;&gt;\n[[take the stairs|HouseToAttic]]</div><div tiddler="CatwalkSparse" tags="" created="201606132316" modifier="twee" twine-position="2487,1214">[agorophobically large space with stormy skylight at top; towering gates interspersed with heavy square hatches]\n\n[[hatch #1|HatchOne]]\n...etc...\n[[flip|CatwalkDense]]</div><div tiddler="AquariumToMuseum" tags="" created="201705211823" modifier="twee" twine-position="228,1702"></div><div tiddler="Excused" tags="" created="201501191951" modifier="twee" twine-position="1676,319">You politely decline the &lt;&lt;$boy&gt;&gt;'s offer.  &lt;&lt;$He&gt;&gt; gives you a wistful pout, but &lt;&lt;$his&gt;&gt; friend simply shrugs&lt;&lt;if $swimming&gt;&gt; and the two dip back under the water, smooth as fish.&lt;&lt;else&gt;&gt; and the two of them dive into the pool without you.  They're surprisingly graceful swimmers.&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $swimming to 1&gt;&gt;\n&lt;&lt;if $dest is &quot;Showers&quot;&gt;&gt;[[leave|PoolToShowers]]&lt;&lt;else if $dest is &quot;Baths&quot;&gt;&gt;[This should never happen!]&lt;&lt;else&gt;&gt;[This should never happen either!]&lt;&lt;endif&gt;&gt;</div><div tiddler="Laps" tags="" created="201501191925" modifier="twee" twine-position="1835,20">You jump into the pool&lt;&lt;if $swimming&gt;&gt; with the &lt;&lt;$boy&gt;&gt;s, who are still&lt;&lt;else&gt;&gt; and the two &lt;&lt;$boy&gt;&gt;s dive in after,&lt;&lt;endif&gt;&gt; racing and splashing each other and generally showing off.\n\nThey're surprisingly graceful swimmers.\n&lt;&lt;set $swimming to 1&gt;&gt;\n[[float|Float]]\n[[flirt|Impress]]\n[[get out|PoolExit]]</div><div tiddler="RoomShut" tags="" created="201607261940" modifier="twee" twine-position="2499,163">You try pushing on the door to see if it will open.  The door is &lt;&lt;if $cold&gt;&gt;coarse and hard and freezing to the touch.&lt;&lt;else&gt;&gt;warm to the touch, and as smooth and seamless as polished glass.&lt;&lt;endif&gt;&gt; It solidly resists your attempts to move it.\n\nYou'll need your key.\n\n[[turn back|LobbyLook]]</div><div tiddler="BatheDeclined" tags="" created="201705212029" modifier="twee" twine-position="840,2064">[if $relaxed, go to (Ocean?), else wake up when your leg twitches]</div><div tiddler="Impassable" tags="" created="201501111703" modifier="twee" twine-position="144,896">The door is too small for you to duck through.  You crawl onto your stomach and try to wriggle your way in, but your shoulders won't fit.  With your body blocking the light you can barely see the stairs in front of your face, let alone what's at the bottom.\n\n[[go back|Basement]]</div><div tiddler="Entrance" tags="" created="201501052026" modifier="twee" twine-position="1011,19">In the center of a broad ramp, a stream flows through a mosaic-lined channel down to the ramp's base, across a hall, and under a glass wall to the forest outside. A tiny footbridge spans the stream.  On either side of it, the hallway--empty counters stocked with luxuries on one hand, and glass wall on the other--stretches away as far as you can see.  To one side of the stream is the silver-handled door leading back outside.\n\nThe faint smell of steam is in the air.\n\n[[follow the left hallway|LobbyEntrance]]\n[[follow the right hallway|LobbyEntrance]]\n[[follow the ramp|RampToShowers]]\n&lt;&lt;if visited(&quot;FirstExit&quot;) or not visited(&quot;Forest&quot;)&gt;&gt;[[go outside|South]]&lt;&lt;else&gt;&gt;[[go outside|FirstExit]]&lt;&lt;endif&gt;&gt;</div><div tiddler="AquariumPlaque" tags="" created="201705211823" modifier="twee" twine-position="89,1561">[you can't read them...]\n\n[[go back|PoolToMuseum]]</div><div tiddler="BatheRelax" tags="" created="201705212002" modifier="twee" twine-position="532,1561">With a quiet sigh of relief, you stretch out your legs until your feet are resting on either side of &lt;&lt;$his&gt;&gt; butt.  With a smile, &lt;&lt;$he&gt;&gt; stretches out &lt;&lt;$his&gt;&gt; own legs and crosses them over your thighs, then reclines against the back of the tub.\n\nIt feels good to relax.\n&lt;&lt;set $relaxed to 1&gt;&gt;\n[[rest|BatheWash]]\n[[stare|BatheStare]]</div><div tiddler="Loft" tags="" created="201501252258" modifier="twee" twine-position="1020,928">The ladder goes through a short tunnel and emerges at the pointy end of an egg-shaped, low-ceilinged loft.  At the wide end of the loft is a large television with two younger &lt;&lt;$boy&gt;&gt;s propped up on pillows in front of it.  The room is very warm; the two &lt;&lt;$boy&gt;&gt;s are naked from the waist up, their shirts lying discarded in a corner.  They look like they're playing some kind of videogame.\n\nAfter a moment, one of them glances your direction. &lt;&lt;$He&gt;&gt; smiles and holds out the controller.\n\n&quot;Oh, hey&quot; &lt;&lt;$he&gt;&gt; says. &quot;Wanna play?&quot;\n\n[[join them|LoftPlay]]\n[[go back|LoftExcuse]]</div><div tiddler="FloatMore" tags="" created="201603280138" modifier="twee" twine-position="2136,169">You smile politely, then return to floating.\n\nAfter a few moments, the &lt;&lt;$boy&gt;&gt; joins you.  &lt;&lt;$He&gt;&gt; ends up floating quite close to you.  Almost close enough to touch.\n\n[[ignore &lt;&lt;$him&gt;&gt;|FloatMost]]\n[[reach out|FloatMost]]\n[[leave the pool|PoolExit]]</div><div tiddler="BatheWasher" tags="" created="201705212029" modifier="twee" twine-position="479,2054">[sensual wash, then &lt;&lt;$boy&gt;&gt; offers to wash your back in return]\n\n[[accept|BatheWashee]]\n[[decline|BatheDeclined]]</div><div tiddler="LightsOff Transition Sheet" tags="stylesheet credits start transition" created="201602031935" modifier="twee" twine-position="562,24">.transition-in {\n\topacity: 0;\n\tposition: absolute;\n}\nbody {\n\ttransition: 1s;\n\t-webkit-transition: 1s;\n}\n.transition-out {\n\topacity: 0;\n\tposition: absolute;\n}</div><div tiddler="LoftCreep" tags="" created="201606212114" modifier="twee" twine-position="1179,1349">You watch.\n\n[[keep watching|LoftCreep]]\n[[leave|House]]</div><div tiddler="StreamEnd" tags="" created="201501061750" modifier="twee" twine-position="2835,606">You follow the stream for a minute or so before arriving at a long wall made of glass.</div><div tiddler="RampToShowers" tags="" created="201501111803" modifier="twee" twine-position="1183,24">The smell of steam grows stronger and the air grows warmer as you make your way up the ramp.  Before long, you come to a large open room.\n\n[[look|Showers][$showering = 0]]</div><div tiddler="Explore" tags="" created="201501061745" modifier="twee" twine-position="148,312">You make your way into the trees.  A cool breeze shakes the leaves overhead and stirs the ferns at your feet.  The sound of the stream begins to fade.\n\n[[keep going|MoreExplore]]\n[[find the stream|FollowSound]]</div><div tiddler="Basement" tags="" created="201501101957" modifier="twee" twine-position="470,768">You're in a warm, carpeted room, well-lit and sparsely furnished.  The ceiling is so low you have to stoop to move around, and the walls are gently curved in an egg shape.  At the pointy end is a small, square door about as tall as your knee.  At the broad end is a ladder leading to a hole in the ceiling.  To the right of the ladder is a fuzzy beanbag chair and a tiny table, and along the opposite wall is a plain bookshelf packed with paperbacks.\n\n[[try the door|ForestStairTiny]]\n&lt;&lt;if not $rushed&gt;&gt;[[read a book|BasementBook]]\n&lt;&lt;endif&gt;&gt;[[climb the ladder|House]]</div><div tiddler="PoolExit" tags="" created="201603311949" modifier="twee" twine-position="1676,171">You swim back to the edge of the pool and pull yourself out, trying not to think of how clumsy you must seem compared to the two &lt;&lt;$boy&gt;&gt;s.  &lt;&lt;if $cold&gt;&gt;The air out here is colder than you remember, and you're soaking wet.  You shiver slightly.&lt;&lt;else&gt;&gt;You start to search for a towel, then remember you don't need one.&lt;&lt;endif&gt;&gt;\n\n[[look around|Pool]]</div><div tiddler="AtticToMuseum" tags="" created="201705211806" modifier="twee" twine-position="80,1360">You're in a steep, narrow stairway lined with dozens of shelves and drawers of every size and shape.  The shelves are stuffed with trinkets, knick knacks, and all kinds of books.\n\nThe stairs are so steep that all you can see at each end are the floor and ceiling.\n\n[[open a drawer|AtticDrawer]]\n[[examine a shelf|AtticShelf]]\n[[go up the stairs|Museum]]\n[[go down the stairs|Attic]]</div><div tiddler="BatheWashee" tags="" created="201705212029" modifier="twee" twine-position="649,2016">[Wash relaxes you if you aren't already. Then SOMETHIN' GOOD happens, and maybe you get the key? Then go to (directly) to Door?]</div><div tiddler="StorySettings" tags="" created="201602022141" modifier="twee" twine-position="10,430">jquery:off\nhash:off\nbookmark:on\nmodernizr:off\nundo:off\nobfuscate:off\nexitprompt:off\nblankcss:off\n</div><div tiddler="StoryMenu" tags="" created="201602021551" modifier="twee" twine-position="10,144">[[Credits|Credits]]</div><div tiddler="SteelKnock" tags="" created="201606222046" modifier="twee" twine-position="2669,163">On closer inspection, the steel door is missing not only its handle, but its keyhole as well.  Its surface is rough and hard and freezing to the touch.  You try pushing on it, but it won't budge.  You try knocking on it, but you hear no response.  There doesn't seem to be any way in.&lt;&lt;set $steel to 1&gt;&gt;\n\n&lt;&lt;RoomsScrap&gt;&gt;</div><div tiddler="LobbyWait" tags="" created="201607262002" modifier="twee" twine-position="871,442">You walk up to the counter and ring the bell, then wait patiently for a few minutes.\n\nNothing happens.\n\nBehind the counter, the keys glimmer in the artificial breeze.\n\n[[ring the bell again|LobbyWaiter]]\n[[climb the counter|LobbyClimb]]\n[[look around|LobbyLook]]</div><div tiddler="CatwalkDense" tags="" created="201606132313" modifier="twee" twine-position="2484,1065">[cramped, industrial hallway(s); regular doors mixed with tiny hatches set near the ceiling]\n\n[[door #1|DoorOne]]\n...etc...\n[[flip|CatwalkSparse]]</div><div tiddler="FollowSound" tags="" created="201501111735" modifier="twee" twine-position="364,302">You follow the sound of running water for only a few moments before reaching its source.\n\n&lt;&lt;Forest&gt;&gt;</div><div tiddler="LoftToStars" tags="" created="201611052127" modifier="twee" twine-position="1183,1661">As you listen, the stars grow slowly brighter.  The ceiling is soon filled with a wash of them: more stars than you've ever seen in your life, the broad band of the Milky Way clearly visible.\n\nAfter a few minutes, you notice the &lt;&lt;$boy&gt;&gt;s have gone quiet.  A moment later you realize that the loft, the ladder, and the floor have all vanished, leaving you floating in space, surrounded by stars and the void.\n\n[[look|Stars]]</div><div tiddler="ConversationBlock" tags="" created="201501182111" modifier="twee" twine-position="1593,1433">You stand up to join them, but as you approach the hall between your rooms something smacks into you, hard.  It takes you a second to realize that you've run into a glass wall blocking the hall's entrance.  Flush with the surrounding wall, it escaped your notice before.\n\nThankfully, the pair don't seem to have noticed you yet.\n\n[[find a way through|ConversationFutile]]\n[[turn back|MiddleStairs][$from = &quot;people&quot;]]</div><div tiddler="Grab" tags="" created="201501111913" modifier="twee" twine-position="1179,458">Just as you grab &lt;&lt;$his&gt;&gt; arm, with a shrieking sound like a stuck tap or maybe laughter, you find yourself standing under running water with soapy hands.  You look around, but the &lt;&lt;$boy&gt;&gt; is gone.\n\nThe water gets cold.\n\n/% TODO: single-passage cold; add another step for permanent cold %/\n[[leave|Showers][$cold = 1]]</div><div tiddler="LobbyToTunnels" tags="" created="201607271750" modifier="twee" twine-position="2117,633">[complete darkness, falling indefinitely, until you realize that you're not falling anymore.  You can hear your breathing echo, you feel cold stone beneath your (bare?) feet, and the air is damp and mouldering.]\n\n&lt;&lt;Tunnels&gt;&gt;</div><div tiddler="LobbyStair" tags="" created="201606222022" modifier="twee" twine-position="870,303">The stairs are richly carpeted and clean-smelling, like cotton.  Before long you emerge onto a rooftop garden densely arranged with flowers.\n\nOn one edge of the rooftop is a hedge wall with a small opening in it and a path beyond. A sign next to the opening says &quot;out&quot;.\n\n[[go out|Garden]]\n[[turn back|LobbyLook]]\n\n/% TODO: stair goes to garden, not rooms %/\n/%&lt;&lt;set $ornate = 0; $steel = 0; $darkd = 0; $lit = 0&gt;&gt;\s\n&lt;&lt;if $from is &quot;below&quot;&gt;&gt; ... narrow landing, which turns left and rises another half-dozen steps before opening into a narrow, breezy hallway.\n\n[[look|Room]]\s\n&lt;&lt;else if $from is &quot;above&quot;&gt;&gt;[description of descend]\n\n[[look|LobbyLook]]\s\n&lt;&lt;else&gt;&gt;[This text should never appear!]&lt;&lt;endif&gt;&gt;%/</div><div tiddler="AtticDrawer" tags="" created="201701170227" modifier="twee" twine-position="225,1158">&lt;&lt;set $drawer to either(0,1,2,3,4,5)&gt;&gt;/% More? %/\s\n&lt;&lt;if $drawer is 0&gt;&gt;[dice, tattered pack of cards, single(?) chesspiece, checkerboard bottom]\s\n&lt;&lt;else if $drawer is 1&gt;&gt;You open one of the drawers and find it filled with colorful baubles: beads of glass and clay and plastic, fake gems and jewels, bits of polished quartz, pyrite, geodes, and simple charms and pendants. You dig your fingers in and lift out a handful, then let the faux riches run through your fingers back into the heap.\n\nAn unusual white beads catches your eye, and you see it's not a bead at all: it's the snarling head of a tiny porcelain dragon.\s\n&lt;&lt;else if $drawer is 2&gt;&gt;[tiny gears, cranks, and pistons, some moving on their own]\s\n&lt;&lt;else if $drawer is 3&gt;&gt;You open one of the drawers and find a rather mismatched collection of &lt;&lt;$boy&gt;&gt;'s underwear, in all different sizes: \s\n&lt;&lt;if $likes is &quot;boys&quot;&gt;&gt;briefs, boxers, boxer briefs, and even a couple of thongs. Most are either plain, solid colors or some kind of plaid, but there are a few houndstooth and argyle pairs as well. Some have more outlandish designs: one bright yellow pair is covered with bananas, a dark blue one with fish. There's a camo pair, and one with leopard print, and another patterned like a Mondrian painting.  A few other pairs are covered with superheroes or videogame characters.\s\n&lt;&lt;else&gt;&gt;panties, bras, boyshorts, and more, in every imaginable color. Most are plain and practical, but there are a fair number of thongs, sheer lingere, and lacy bits mixed in as well.&lt;&lt;endif&gt;&gt;\n\nThey don't smell like anything but clean laundry, mostly--just a hint of...\s\n&lt;&lt;else if $drawer is 4&gt;&gt;You pull out one of the larger drawers and find it ringed with stone, with a pool of dark water at the bottom, like a square well.\n\nThe water sloshes around from the drawer's motion. It goes deep, much deeper than the drawer. You can't see the bottom.\s\n&lt;&lt;else if $drawer is 5&gt;&gt;You open one of the drawers and find it almost completely empty. The only thing in it is a single sheet of notebook paper, ragged along one edge, with a note that says only:\n\n  Don't forget\n\n  this is important\s\n&lt;&lt;endif&gt;&gt;\n\n[[close the drawer|previous()]]</div><div tiddler="BathroomDrowner" tags="" created="201701170021" modifier="twee" twine-position="1876,620">You pick a direction and start swimming. The room stays pitch black and empty; the water flowing over your skin is the only sign you're moving at all.\n\nYour lungs begin to ache.\n\n[[swim|BathroomDrownest]]</div><div tiddler="ForestStairTiny" tags="" created="201501111658" modifier="twee" twine-position="315,910">Couching down, you open the door and peer through.  A cool breeze brushes past.  On the other side, you see a broad set of stone stairs leading down into darkness.\n\n[[go through|Impassable]]\n[[go back|Basement]]</div><div tiddler="RoomsScrap" tags="" created="201607261947" modifier="twee" twine-position="2845,234">[if $cold, steel door is ajar.  If $company (or $played=4?), ornate door is ajar.]\n\nYou are in a narrow, breezy hall carpeted in plush burgundy.  The hall is lined on either side with dark wood panels, interspersed with rippled glass doors.  Upon each door is a small keyhole, but no handle.  One such door is lit from behind with clean, bright daylight; the others are dark.\n\nAt either end of the hall stands another door: one of heavy wood and ornately inlaid gold and silver, the other of brutal riveted steel.  Both are also without handles.\n\nIn the center of the hall, where one of the glass doors would have gone, is a descending staircase.\n\n[[try the lit door|LitRoom]]\n[[try a dark door|DarkRoom]]\n&lt;&lt;if not $ornate&gt;&gt;[[try the ornate door|OrnateKnock]]\n&lt;&lt;endif&gt;&gt;&lt;&lt;if not $steel&gt;&gt;[[try the steel door|SteelKnock]]\n&lt;&lt;endif&gt;&gt;[[leave|LobbyStair][$from = &quot;above&quot;]]</div><div tiddler="Bedroom" tags="" created="201602012130" modifier="twee" twine-position="524,1090">The bedroom is empty except for a dresser with the bottom drawer left open, and a large four-poster bed.  &lt;&lt;if $cold&gt;&gt;The bed is made, and the dresser drawer is neatly stocked with folded shirts.  The air here is a little chilly.&lt;&lt;else&gt;&gt;The bed is rumpled and unmade, but the drawer is neatly stocked with colorful folded shirts.  &lt;&lt;if $stripped&gt;&gt;Two sets of clothes&lt;&lt;else&gt;&gt;A shirt, pants, and set of &lt;&lt;$boy&gt;&gt;'s underwear&lt;&lt;endif&gt;&gt; are piled carelessly on the floor.&lt;&lt;endif&gt;&gt;\n\nThe room is illuminated with light from behind a half-open door on the far wall.  The sound of running water and a faint cloud of steam pour from the room beyond.\n\n[[knock on the door|BathroomKnock]]\n[[go in without knocking|Bathroom]]&lt;&lt;if not $stripped&gt;&gt;\n&lt;&lt;if not $cold&gt;&gt;[[leave your clothes on the bed|BedroomStrip]]\n&lt;&lt;endif&gt;&gt;[[go back out|House]]&lt;&lt;endif&gt;&gt;</div><div tiddler="MoreExplore" tags="" created="201501101930" modifier="twee" twine-position="145,470">You walk past tree after monotonous tree, soon losing track of the number.  Though you haven't turned or wavered, you can't shake the feeling that you're going in circles.  You can still hear the rushing stream in the distance, but only just.\n\n&lt;&lt;if either(&quot;bore&quot;, &quot;door&quot;) is &quot;bore&quot;&gt;&gt;[[keep going|BoreExplore][$dazed = 0]]&lt;&lt;else&gt;&gt;[[keep going|ForestDoor]]&lt;&lt;endif&gt;&gt;\n[[find the stream|FollowSound]]</div><div tiddler="OrnateKnock" tags="" created="201606222046" modifier="twee" twine-position="2666,28">On closer inspection, the ornate wooden door is missing not only its handle, but its keyhole as well.  In fact, the entire surface is as smooth and slick as polished glass.  You try pushing on it, but it won't budge.  You try knocking on it, but you hear no response.  There doesn't seem to be any way in.&lt;&lt;set $ornate to 1&gt;&gt;\n\n&lt;&lt;RoomsScrap&gt;&gt;</div><div tiddler="ConversationFutile" tags="" created="201501191607" modifier="twee" twine-position="1596,1298">&lt;&lt;if $cold&gt;&gt;Hugging your arms for warmth and trying to stop from shaking, you&lt;&lt;else&gt;&gt;You&lt;&lt;endif&gt;&gt; crouch down near the entrance and inspect the wall.  There doesn't seem to be any kind of seam or handle, and the wall doesn't budge no matter how hard you push it, or from which angle.  The hall appears to be sealed off.\n\n&lt;&lt;if $cold&gt;&gt;You look up to see if the other two will let you in, only to find that while you were concentrating the &lt;&lt;$boy&gt;&gt; and &lt;&lt;$his&gt;&gt; companion have left.  The other room is empty.&lt;&lt;set $empty to 1&gt;&gt;\n\n&lt;&lt;else&gt;&gt;[[get the pair's attention|ConversationIgnored]]\n&lt;&lt;endif&gt;&gt;[[leave|MiddleStairs][$from = &quot;people&quot;]]</div><div tiddler="BeachWoods" tags="" created="201606201922" modifier="twee" twine-position="1786,1173">You walk a little way into the trees, the sound of surf fading oddly fast.  You turn to look behind you, and see only the barest glimmer of ocean beyond the thickening forest.\n\nBefore you, faintly, you hear the far-off sound of a running stream.\n\n[[go back|Beach][$from=&quot;Trees&quot;]]\n[[find the stream|FollowSound]]</div><div tiddler="FireWake" tags="" created="201611080203" modifier="twee" twine-position="843,1193">--and a crushing blast of pain blows through the heat and snuffs it out--\n\n[[wake up.|Awake]]</div><div tiddler="DarkRoom" tags="" created="201606222053" modifier="twee" twine-position="2671,303">&lt;&lt;if $darkd &gt; 0&gt;&gt;You walk over to another door and test it out.&lt;&lt;else&gt;&gt;You walk over to one of the many darkened doors and try to open it.&lt;&lt;endif&gt;&gt;  You try pushing on it, but it won't budge.  You try knocking on it, but you hear no response.  There doesn't seem to be any way in without a key.&lt;&lt;set $darkd to 1&gt;&gt;\n\n&lt;&lt;RoomsScrap&gt;&gt;</div><div tiddler="BatheAlone" tags="" created="201701162048" modifier="twee" twine-position="383,1562">[assert &lt;&lt;$cold&gt;&gt; or not &lt;&lt;$knocked&gt;&gt;]\n\n&lt;&lt;if $cold&gt;&gt;[the water is lukewarm and nothing happens. If you try to get out, you can't find the motivation to move. Either way, you start feeling deeply lonely, and gradually sink lower into the tub. As you immerse yourself under the water, the tub gets deeper and deeper until you're many meters under the surface. Eventually you inhale, and wake up.\n\n&lt;&lt;else&gt;&gt;[the &lt;&lt;$boy&gt;&gt; walks in shortly after and shuts the door.  Raising one eyebrow, &lt;&lt;$he&gt;&gt; says &quot;Well, hello there. Made yourself comfortable, I see.&quot;  &lt;&lt;$He&gt;&gt; grins.  &quot;Well, you're cute, so I forgive you--but you really should knock or something next time.&quot;  &lt;&lt;$He&gt;&gt; then gets in the tub with you.  Reverts to BatheCompany.]&lt;&lt;endif&gt;&gt;</div><div tiddler="MazeCross" tags="" created="201501182000" modifier="twee" twine-position="1429,1016">It takes some time to cross the maze.  For every wall you can simply climb over, four more block your way, and although the walls are clear glass, the shimmering water running over them makes it impossible to see the path beyond.\n\nAt last, you find your way to the other side of the maze, where a narrow walkway extends to a broad sheet of falling water.  On the other side of the waterfall, you see that the hazy shape from before is actually two people, sitting close together--talking, perhaps, though you can't hear anything through the water.\n\nYou start to make your way across, but your once-sure footing is suddenly gone, leaving the watery glass slick and smooth.  Below the walkway, you can see all the way to the bottom of the pool, hundreds of feet down.\n\n[[keep going|WalkwayCross]]\n[[turn back|MiddleStairs][$from = &quot;people&quot;]]</div><div tiddler="Start" tags="start" created="201501042151" modifier="twee" twine-position="422,10">&lt;&lt;set \n$ignoring = 0; $cold = 0; \n$empty = 0; \n$swimming = 0; $dark = 0; \n$stripped = 0; $knocked = 0; $alone = 0;\n$played = 0; $burned = 0; $rushed = 0;\n$key = 0;\n$end = 0\n&gt;&gt;[[Sleep.|Sleep]]</div><div tiddler="Forest" tags="" created="201501052014" modifier="twee" twine-position="364,159">Tall trees dappled with warm sunlight surround you.  Leaves and ferns litter the forest floor.\n\nNearby, a clear stream rushes over a bed of smooth stones.  The sound is very soothing.&lt;&lt;if not visited(&quot;FirstExit&quot;)&gt;&gt;\n\nEverything you touch feels real, yet the whole seems fake.&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;if not visited(&quot;Drink&quot;)&gt;&gt;[[take a taste|Drink]]\n&lt;&lt;endif&gt;&gt;[[find the source|Upstream]]\n[[go downstream|Downstream]]\n[[explore the forest|Explore]]</div><div tiddler="Stars" tags="" created="201611052132" modifier="twee" twine-position="1030,1663">Space is surprisingly comfortable.  You feel warm and at peace.\n\nThere are //so many// stars; more than you've ever imagined.  Their light glows pinprick-solid against the black of space, unshimmered by atmosphere.  No earth, moon, or sun in view; you can't even see your own body.  There are only stars.\n\nTime doesn't matter here.  You float, staring.\n\n[[wake up.|Awake]]</div><div tiddler="BatheTense" tags="" created="201705212002" modifier="twee" twine-position="393,1732">You shake your head no.  The &lt;&lt;$boy&gt;&gt; shrugs.  &quot;Let me know if you change your mind.&quot;  &lt;&lt;$He&gt;&gt; leans back and closes &lt;&lt;$his&gt;&gt; eyes, still not bothering to cover anything.\n\nYour legs are starting to cramp up a bit.\n\n[[tell &lt;&lt;$him&gt;&gt; yes|BatheRelax]]\n[[stare|BatheStare][$relaxed=0]]</div><div tiddler="LobbyEntrance" tags="" created="201606222005" modifier="twee" twine-position="1014,164">You stroll down the carpeted hallway, taking your time.  You soon pass a spacious, well-lit lobby filled with plush chairs, tables, and potted plants.  The AC sends a faint, cool breeze drifting into the hallway.\n\nThe far wall of the lobby is also glass; there's a smooth tan beach and calm waves beyond.  Along one inner wall, hundreds of shining keys hang from hooks behind a broad counter.\n\nThe counter is empty.\n\n[[take a look|LobbyLook]]\n[[continue on|InsideFollow][$from=&quot;Hall&quot;]]</div><div tiddler="PoolTalk" tags="" created="201603280138" modifier="twee" twine-position="1987,171">You smile at the &lt;&lt;$boy&gt;&gt; and strike up a conversation, mentioning how gracefully &lt;&lt;$he&gt;&gt; and &lt;&lt;$his&gt;&gt; friend cut through the water.  &lt;&lt;$He&gt;&gt; laughs and brushes the complement off, but seems pleased.  You struggle to think of something else to say.\n\nYou start to ask &lt;&lt;$him&gt;&gt; about &lt;&lt;$his&gt;&gt; friend, looking around as you do, but the floor of the pool drops out from under you and you fall through the water as though it were air.\n\nIt's only a moment before you're able to swim to the surface again, but when you do you find the room has gone completely dark.  With all the noise of your splashing, you can't tell where the &lt;&lt;$boy&gt;&gt; and &lt;&lt;$his&gt;&gt; companion are.  You can't even see your own hand in front of your face.\n\n[[wait|LightsOut][$from = &quot;talking&quot;]]</div><div tiddler="North" tags="" created="201501042351" modifier="twee" twine-position="521,596">In front of you are two tall, straight trees.  Between them is a pair of glass doors with gold handles: the stream flows under them.  As far as you can see, there is nothing but more forest beyond the doors--although, at certain angles, it looks like the doors are sparkling with some sourceless movement.\n\n[[go upstream|Forest]]\n[[go through the doors|StairSide]]\n[[go around the doors|Downstream]]\n\n[The stream flows into a small opening at the base of the wall.  On the other side, it continues through a mosaic-lined channel underneath a set of glass doors with gold handles, to a large pool farther in.  A confusion of sparkling light extends up, away from the pool and out of sight.\n\nOn either side of the doors are empty counters with cabinets and shelves behind them, all unattended, stretching indefinitely in either direction.]</div><div tiddler="BatheWash" tags="" created="201705212008" modifier="twee" twine-position="473,1899">&lt;&lt;if $relaxed&gt;&gt;[$boy asks if wash]&lt;&lt;else&gt;&gt;[boy notices fidgeting, suggests wash]&lt;&lt;endif&gt;&gt;\n\n[[let &lt;&lt;$him&gt;&gt; wash your back|BatheWashee]]\n[[ask to wash &lt;&lt;$his&gt;&gt; back|BatheWasher]]\n[[decline|BatheDeclined]]</div><div tiddler="BasementBook" tags="" created="201501111658" modifier="twee" twine-position="472,908">You crawl over to the bookshelf, pick out one of the more interesting-looking titles, and curl up in the beanbag.  The chair is quite comfortable, and you're soon engrossed.\n\nSome time later, you find to your surprise that you've reached the last page.  A clock on the table shows that several hours have passed.  Stretching the stiffness from your limbs, you return the book to its place.\n\n[[look around|Basement][$rushed=1]]</div><div tiddler="MiddleStairs" tags="" created="201501181924" modifier="twee" twine-position="1429,864">&lt;&lt;if $from is &quot;below&quot;&gt;&gt;You climb the stairs for several minutes, the pool slowly growing smaller beneath you.  Though every stair and walkway is made of watery glass, it isn't slippery in the least.\n\nAfter a while, you come to a large platform.  &lt;&lt;else if $from is &quot;above&quot;&gt;&gt;[pass]&lt;&lt;else if $from is &quot;people&quot;&gt;&gt;The way back is much easier than the way there.  You soon find yourself on the other side of the watery platform.\n\n&lt;&lt;else&gt;&gt;[This shouldn't happen: $from = &lt;&lt;$from&gt;&gt;]&lt;&lt;endif&gt;&gt;On the edge of the platform, a flight of stairs extends above and below.  Away from the stairs is a maze of glass walls, some only as tall as your ankle, others many times your height.&lt;&lt;if $empty&gt;&gt;  There's nothing there now.&lt;&lt;else&gt;&gt;  On the other side of the maze, through the shimmering walls, you spot a hazy shape that might be a person.&lt;&lt;endif&gt;&gt;\n\n[[go up|StairsToOcean]]\n[[go down|LowerStairs][$from = &quot;stairs&quot;]]&lt;&lt;if not $empty&gt;&gt;\n[[cross the maze|MazeCross]]&lt;&lt;endif&gt;&gt;</div><div tiddler="PitDisdain" tags="" created="201501111850" modifier="twee" twine-position="1342,454">You open your mouth to speak, but the &lt;&lt;$boy&gt;&gt; has already turned away and resumed washing &lt;&lt;$him&gt;&gt;self.  &lt;&lt;$He&gt;&gt;'s not even looking at you.\n\n[[leave|ExitPit]]\n[[try again|Ignored]]\n[[grab &lt;&lt;$him&gt;&gt;|Grab]]</div><div tiddler="FirstEntrance" tags="" created="201501061839" modifier="twee" twine-position="852,2">The door opens without difficulty.  Inside, the air is warm and humid.  The shelves behind the counters are stocked with fluffy towels, luxuriant patterned robes, and countless small bottles of soaps, salts, and oils. You don't need anything.\n\nA tiny footbridge crosses the stream to the hall on the other side.  The unattended counters continue as far as you can see in both directions.  In front of you, the stream flows through a channel running down the center of a broad ramp.\n\n[[follow the left hallway|LobbyEntrance]]\n[[follow the right hallway|LobbyEntrance]]\n[[follow the ramp|RampToShowers]]</div><div tiddler="LightsOut" tags="" created="201603280052" modifier="twee" twine-position="1839,327">&lt;&lt;set $dark to 1&gt;&gt;\s\n&lt;&lt;if $from is &quot;showers&quot;&gt;&gt;The air here is cool and just a little humid, but not uncomfortable.  Wet echoes sound across the room with your footsteps as your cautiously feel your way to the edge of the pool, then lower yourself in.  The water feels &lt;&lt;if $cold&gt;&gt;cold and heavy&lt;&lt;else&gt;&gt;cool and refreshing&lt;&lt;endif&gt;&gt; on your skin.\n\nAfter a few moments, your eyes adjust enough to make out dim shapes.  The two &lt;&lt;$boy&gt;&gt;s are still nowhere to be seen.\n\n&lt;&lt;else&gt;&gt;Hardly any light is left in the room--it takes several long minutes for your eyes to adjust.  Eventually, you're able to make out dim shapes.\n\nThe two &lt;&lt;$boy&gt;&gt;s seem to have disappeared; no one else is in the pool with you.\n\n&lt;&lt;endif&gt;&gt;[[go back downstairs|PoolToTunnels]]\n[[keep swimming|DarkSwim]]</div><div tiddler="Museum" tags="" created="201603301917" modifier="twee" twine-position="122,1864">[Opulent, labyrinthine museum in anachronistic styles. Extremely vertical; reappearing elevator is the central fixture? Clearly closed, thunderstorm outside.  Constant feeling of being chased/watched, feeling like you're trespassing.  Touching anything / going anywhere you're &quot;not supposed to&quot; leads (by degrees) to getting caught (?), which wakes you up. (Exception: key?) Navigating correctly brings you to ~~Rooms (which ones depends on $cold OR just to door).~~ ...Tunnels?]</div><div tiddler="LowerStairs" tags="" created="201501111740" modifier="twee" twine-position="1254,865">[revise entire Stairs area: water flows UP!]\n\n&lt;&lt;if $from is &quot;doors&quot;&gt;&gt;As you approach the glass structure rising above the pool, you realize that the shimmering movement is the motion of flowing water.  Water coats nearly every surface of the structure, but...something is strange about its movement.  It takes you a moment to see that the water is flowing //up//, pouring from the pool at the bottom onto the glass structure above--streaming along walls, rushing up stairs, and spilling over the walkways and channels that connect them, falling up and up out of sight.  &lt;&lt;else if $from is &quot;stairs&quot;&gt;&gt;You make your way back down to the pool and look around.  &lt;&lt;else&gt;&gt;[This shouldn't happen: $from = &lt;&lt;$from&gt;&gt;]&lt;&lt;endif&gt;&gt;Somewhere high above, bright sunlight shimmers and dances through the watery glass.\n\n&lt;&lt;if $from is &quot;doors&quot;&gt;&gt;At the far edge of the pool&lt;&lt;else&gt;&gt;At the near edge of the pool&lt;&lt;endif&gt;&gt;, a bridge runs out to a staircase in the center.  &lt;&lt;if $from is &quot;doors&quot;&gt;&gt;On this side&lt;&lt;else&gt;&gt;On the far side&lt;&lt;endif&gt;&gt;, a trench of water flows from beneath two glass doors with gold handles, down a short hall, and into the pool.\n\n[[climb the stairs|MiddleStairs][$from = &quot;below&quot;]]\n[[go through the doors|North]]</div><div tiddler="BathroomKnock" tags="" created="201701161921" modifier="twee" twine-position="381,1249">You knock on the bathroom door and call &quot;Hello?&quot;\n\n&lt;&lt;if $cold&gt;&gt;There's no response.&lt;&lt;else if $knocked&gt;&gt;You hear the &lt;&lt;$boy&gt;&gt;'s voice reply from inside. &quot;Yeah, come on in!&quot;&lt;&lt;else&gt;&gt;You hear a &lt;&lt;$boy&gt;&gt;'s voice: &quot;Just leave your clothes on the bed before you come in, okay?&quot;\n\nYou don't recognize &lt;&lt;$his&gt;&gt; voice. &quot;Um, do I know you?&quot; you say.\n\nThe &lt;&lt;$boy&gt;&gt; laughs.  &quot;I don't think so!&quot; &lt;&lt;$he&gt;&gt; says. &quot;You sound cute, though. Come in whenever you're ready.&quot;&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $knocked to 1&gt;&gt;\n[[go in|Bathroom]]\n&lt;&lt;if not $cold and not $stripped&gt;&gt;[[leave your clothes on the floor|BedroomStrip]]\n&lt;&lt;endif&gt;&gt;[[walk away|Bedroom]]</div><div tiddler="LoftRegret" tags="" created="201606212131" modifier="twee" twine-position="1028,1517">You climb back up the ladder quietly, not wanting to distrub the &lt;&lt;$boy&gt;&gt;s' game.  But when you reach the top of the ladder, you find the loft is pitch black.  You pause for a moment to let your eyes adjust, then hear soft conversation and giggling from the middle of the room, where the cushions were piled.\n\nThe voices are low and whispered--too soft for you to make out.\n\n[[listen|LoftListen]]\n[[leave|House]]</div><div tiddler="FireBack" tags="" created="201602022106" modifier="twee" twine-position="840,1050">You draw your hand back from the fire.  Slowly, the heat fades.\n\nYour hand is undamaged.  It feels fine; comfortable, even.  The fire is warm.\n\nYou feel restless.  Something's missing.\n\n[[look up|Fireplace]]</div><div tiddler="LobbyTake" tags="" created="201607271619" modifier="twee" twine-position="1153,610">You check to make sure the lobby is still deserted, then reach up and remove the golden key from its hook.  It feels strangely heavy.  Seeing nothing else unusual about the key, you tuck it into your pocket.\n\nThe floor beneath you vanishes.  You grab for the counter as you fall, but it's well out of reach.  The light from above shrinks away impossibly fast as you plummet into perfect darkness.&lt;&lt;set $key to 1&gt;&gt;\n\n[[fall|LobbyToTunnels]]</div><div tiddler="AtticShelf" tags="" created="201701201232" modifier="twee" twine-position="225,1293">&lt;&lt;set $shelf to either(0,1,2,3,4,5)&gt;&gt;/% More? %/\s\n/% TODO: interaction? e.g., put the dragon in the drawer with the head, then both vanish and a tiny living dragon appears in either the bonsai or woods shelves; but if you try to put the head on the dragon it just falls off and gets lost (then reappears in the drawer) %/\s\n&lt;&lt;if $shelf is 0&gt;&gt;On one of the shelves is a little bonsai tree in a glass pot, with tiny jewel-like leaves in every imaginable shade of green. The leaves are rustling slightly as though in a light breeze, though you don't feel a draft.\s\n&lt;&lt;else if $shelf is 1&gt;&gt;On one of the shelves is a dizzying menagerie of little porcelain figurines: geese, falcons, fish, farm animals of all kinds, gorillas, elephants, big cats and tabbies, seals and walruses, giraffes, beetles, dragonflies, butterflies, wolves, lizards and crocodiles, mythical beasts, and more.\n\nOne of the figurines--a dragon with flared wings and claws raised to strike--is missing its head.\s\n&lt;&lt;else if $shelf is 2&gt;&gt;One of the shelves is especially packed with books of every imaginable variety: pulp paperbacks; ancient, loosely-bound folios; hardcovers of every size and thickness; heavy, gilded tomes bound in rich leather; and even a few magazines and brochures. You can't see what's on the spines.\n\nPulling one off the shelf at random, you open it up and can't see the words inside, either. You put it back on the shelf.\s\n&lt;&lt;else if $shelf is 3&gt;&gt;Next to one of the shelves is a large cabinet in an antique style.\n\nYou open the door of the cabinet and find another, smaller cabinet inside it, this one with a much more modern look. You open that cabinet and find another, still smaller cabinet with a rather generic look, as though it might be found in a school or office. You open that cabinet as well, and see...\n\nA &lt;&lt;$boy&gt;&gt;'s face, eyes wide and staring&lt;&lt;if $cold&gt;&gt; out blankly from inside a solid block of ice.\n\n&lt;&lt;$His&gt;&gt; eyes, only &lt;&lt;$his&gt;&gt; eyes, move to look directly at you.&lt;&lt;else&gt;&gt; for a moment before &lt;&lt;$he&gt;&gt; smiles and laughs--sending your stomach to your throat as though the floor's fallen out from under you--then shuts a door on &lt;&lt;$his&gt;&gt; side.\n\nYou push on it, but it doesn't open.&lt;&lt;endif&gt;&gt;\s\n&lt;&lt;else if $shelf is 4&gt;&gt;One of the shelves contains a detailed diorama of a mill and waterwheel in some piney, mountainous woods. On a closer look, there is even more detail than you first thought: an actual trickle of water is really turning the waterwheel, and you can just make out individual needles on the miniscule trees. The branches sway as you breathe.\n\nThough you can't see inside, the windows of the mill are glowing with the unmistakable flicker of candlelight.\n\nThere is no back: the trees simply continue, rising steeply out of sight toward the mountain's peak.\s\n&lt;&lt;else if $shelf is 5&gt;&gt;One of the shelves holds an old, fancy-looking oil lamp in an eastern style, like the one from //Aladdin//. The lamp is lit, flickering gently with a warm, yellow light.\n\nYou reach out with your thumb and rub it a few times, but you don't see what happens. /% But something DOES happen--what? %/\s\n&lt;&lt;endif&gt;&gt;\n\n[[look around|previous()]]</div><div tiddler="LobbyClimb" tags="" created="201607262002" modifier="twee" twine-position="1014,583">You clamber over the polished countertop to the other side.  Nothing's hidden behind it--there's just the wall of hanging keys.\n\nUp close, one of the keys stands out: where the others all have square bows and a dull brassy color, this key is closer to gold, with a bow like a circle.\n\nThe other keys are all stamped with random-seeming numbers--439, 20, 1615--but the gold one is blank.\n\n[[take the gold key|LobbyTake]]\n[something else??]/% TODO: if you turn back, the gold key will be waiting on the counter for you (and if you don't climb the counter?) %/</div><div tiddler="StairSide" tags="" created="201501061831" modifier="twee" twine-position="666,596">The doors unlatch with a satisfying //k-chunk//.  The sound echoes grandly, as though there's a large room on the other side.\n\nYou peer through the opened doors and find there //is// a large room on the other side, tiled from floor to ceiling with abstract, colorful mosaics.  The stream flows from the doors, down a short hall, and into a large, light-dappled pool. Above the pool, dozens of sparkling stairs, panels and walkways--all glass--rise up and out of sight.  They criscross, overlap, and shimmer with dazzling movement.\n\n[[go back|North]]\n[[go through the doors|LowerStairs][$from = &quot;doors&quot;]]</div><div tiddler="InsideFollow" tags="" created="201501061832" modifier="twee" twine-position="1025,440">&lt;&lt;if $from is &quot;Lobby&quot;&gt;&gt;You exit the lobby and walk down the long hall,&lt;&lt;else&gt;&gt;You continue down the hall,&lt;&lt;endif&gt;&gt; blank white wall on one side and unbroken glass on the other.  Outside, the leaves of the trees sway a little in a light breeze.&lt;&lt;if not visited(&quot;FirstExit&quot;)&gt;&gt;  For some reason, the forest doesn't seem as fake from in here.&lt;&lt;endif&gt;&gt;\n\nBefore long, a stream crosses your path.\n\n[[look|Entrance]]</div><div tiddler="ExitPit" tags="" created="201501111850" modifier="twee" twine-position="1177,308">Face burning, you turn away and climb back out of the pit.  You glance around the room to check if anyone else has seen you.\n\n&lt;&lt;Showers&gt;&gt;</div><div tiddler="Fireplace" tags="" created="201602021540" modifier="twee" twine-position="698,913">You're sitting by the fire.  The cushions are broad and very comfortable.  The fire flickers prettily in the dark; red and gold.  You stare into the flames.\n\n&lt;&lt;if not $burned&gt;&gt;[[take a nap|FireNap]]\n&lt;&lt;endif&gt;&gt;[[burn yourself|FireBurn]]\n[[stand up|House]]</div><div tiddler="BatheCompany" tags="" created="201701162048" modifier="twee" twine-position="534,1399">The water is comfortably hot. It's a large tub, but not quite big enough for two strangers--even with your knees bent, your feet are still touching.\n\nThe &lt;&lt;$boy&gt;&gt; cocks &lt;&lt;$his&gt;&gt; head and smirks. &quot;You can relax if you'd like,&quot; &lt;&lt;$he&gt;&gt; says, smiling.  &quot;It's okay, I don't mind if you touch me.&quot;\n\n&lt;&lt;$He&gt;&gt; isn't bothering to cover &lt;&lt;$him&gt;&gt;self at all.\n\n[[tell &lt;&lt;$him&gt;&gt; yes|BatheRelax]]\n[[tell &lt;&lt;$him&gt;&gt; no|BatheTense]]</div><div tiddler="LobbyWaiter" tags="" created="201607262005" modifier="twee" twine-position="871,582">You ring the bell again, loudly.  You wait.  You ring the bell a third time.\n\nNobody comes.\n\n[[climb the counter|LobbyClimb]]\n[[look around|LobbyLook]]</div><div tiddler="LoftExcuse" tags="" created="201603291845" modifier="twee" twine-position="1033,793">You shake your head and apologize for interrupting their game.  The &lt;&lt;$boy&gt;&gt; shrugs and turns back to the television as you make your way down the ladder.\n\n[[look|House]]</div><div tiddler="FireToLobby" tags="" created="201611080231" modifier="twee" twine-position="872,718">Your eyes are open in a spacious, well-lit lobby.  You're curled up on one of the many plush chairs scattered around the room, along with small tables and potted plants. The AC sends a faint, cool breeze drifting over you.\n\nLooking around, you see the lobby's entrance: a hallway with a long glass wall, running out of sight to the left and right.  Beyond the glass lies the forest. \n\nThe wall opposite the entrance is also glass. There's a smooth tan beach and calm waves on the other side.  Along a third, inner wall, hundreds of shining keys hang from hooks behind a broad counter.\n\n[[stand up|LobbyLook]]</div><div tiddler="Showers" tags="" created="201501061831" modifier="twee" twine-position="1342,20">You're in a room covered from floor to ceiling with tiles as warm as the steamy air.  A dozen shower spouts are spaced around the walls of the room, and several more jut out from the ceiling near the middle.  Some of them are running, but no one else is in the room.\n\nYou don't see any drains: instead, the water collects at the edges of the room in a gutter, which flows to a channel running through the center of a broad ramp, down and out of sight.\n\nIn the center of the room is a deeply recessed pit, large enough for maybe four people, with stairs leading in one side.  You hear the sound of &lt;&lt;if $cold&gt;&gt;running&lt;&lt;else&gt;&gt;splashing&lt;&lt;endif&gt;&gt; water coming from the pit, but you can't quite see in.\n\nOn the other wall of the room, barely visible through the steam, is a narrow hall with a flight of stairs climbing out of sight. In the corner to the side of the hall is an unmarked door.  It looks like a maintenance door of some kind; you're probably not supposed to use it.\n\n&lt;&lt;if not $showering&gt;&gt;[[take a shower|TakeAShower]]\n&lt;&lt;else&gt;&gt;&lt;&lt;set $showering to 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $ignoring and not $cold&gt;&gt;[[go in the pit|Ignoring]]&lt;&lt;else&gt;&gt;[[go in the pit|ShowerPit]]&lt;&lt;endif&gt;&gt;\n[[follow the ramp|Entrance]]\n[[follow the stairs|ShowersToPool]]\n[[try the door|Baths]]</div><div tiddler="Baths" tags="" created="201602010340" modifier="twee" twine-position="2327,1148">[~~Moldy, rotting wooden floors (no walls mentioned).  Two &quot;themed&quot; shower rooms, one totally ruined.  Rusted, dripping, steampunk-y tubes, valves and chambers comprise the &quot;baths.&quot;~~ Spaceship!!  Catwalk at far end collapses if you try to use it, wakes you up.]</div><div tiddler="Bathroom" tags="" created="201602012041" modifier="twee" twine-position="529,1249">The bathroom is bright, steamy, and warm.  A sink and counter occupy the left wall; to your right is a large bathtub with the tap running.\n\n&lt;&lt;if $knocked and not $cold&gt;&gt;An attractive &lt;&lt;$boy&gt;&gt; about your age is lounging in the tub, unabashedly naked.  &lt;&lt;if $stripped&gt;&gt;&lt;&lt;$He&gt;&gt; looks you over, smiling.  &quot;Oh yeah, you're a cutie all right.&quot; &lt;&lt;$He&gt;&gt; motions you over, pulling &lt;&lt;$his&gt;&gt; legs in to make room. &quot;Come on in, the water's perfect.&quot;&lt;&lt;else&gt;&gt;Seeing you still clothed, &lt;&lt;$he&gt;&gt; frowns.\n\n&quot;Hey, that's not fair. Take those off.&quot;&lt;&lt;endif&gt;&gt;&lt;&lt;else&gt;&gt;The tub is empty.  No one else is in the room.&lt;&lt;if not $stripped&gt;&gt;\n\nYou begin to sweat under your clothes.&lt;&lt;endif&gt;&gt;&lt;&lt;endif&gt;&gt;\n\n[[shut the door|BathroomSwelter][$locked=0]]\n&lt;&lt;if not $stripped&gt;&gt;[[take your clothes off|BathroomStrip]]\n[[leave|Bedroom]]\n&lt;&lt;else if not $knocked&gt;&gt;[[get in|BatheAlone]]\n&lt;&lt;else&gt;&gt;[[get in|BatheCompany]]&lt;&lt;endif&gt;&gt;</div><div tiddler="PoolToMuseum" tags="" created="201611052105" modifier="twee" twine-position="228,1560">&lt;&lt;set $from to &quot;pool&quot;&gt;&gt;You step into a large, circular aquarium, dimly lit but with flashes of bioluminescent color. &lt;&lt;if $from is &quot;pool&quot;&gt;&gt;You're still underwater, but your lungs don't ache anymore.&lt;&lt;else&gt;&gt;Although you're underwater, you feel no particular need for air.&lt;&lt;endif&gt;&gt;&lt;&lt;if $from is not &quot;museum&quot;&gt;&gt; You turn to close the door you came in through, but there isn't one.&lt;&lt;endif&gt;&gt;\n\nThe silhouettes of fish, eels, rays, sharks, and other animals you can't identify dart and swoop around you. The floor of the tank is covered in sand and coral, with a little stand of kelp in one corner. A walkway and guard rail line the aquarium, with descriptive plaques set at regular intervals.  On the opposite side of the tank is a curving stair leading out.\n\nYou're not actually a guest here.\n\n[[examine a plaque|AquariumPlaque]]\n[[go out|AquariumToMuseum]]</div><div tiddler="DarkSwim" tags="" created="201603280130" modifier="twee" twine-position="1839,473">[if swim long enough find underwater door that leads to submerged section of Museum, or (if you run out of breath) awake.]\n\n[[OPEN TEH HATCH!!!!|PoolToMuseum]]</div><div tiddler="BoreExplore" tags="" created="201501101934" modifier="twee" twine-position="145,612">You keep walking, and the trees keep coming, endlessly.  Though the sound of the stream wavers at the edge of hearing, it never quite falls silent.&lt;&lt;if $dazed&gt;&gt;\n\nYou walk through the forest forever.&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;if not $dazed and (either(&quot;bore&quot;, &quot;door&quot;) is &quot;bore&quot;)&gt;&gt;[[keep going|BoreExplore][$dazed = 1]]&lt;&lt;else&gt;&gt;[[keep going|ForestDoor]]&lt;&lt;endif&gt;&gt;\n[[find the stream|FollowSound]]</div><div tiddler="Tunnels" tags="" created="201501110016" modifier="twee" twine-position="2312,556">[dark, concrete, partially flooded (non-euclidean?) labyrinth. Navigate successfully: Room. 'leave/give up': Baths? Awake?]\n\n[pitch black, mouldering air, stairs underfoot: lower tunnels]</div><div tiddler="LoftWatch" tags="" created="201603301939" modifier="twee" twine-position="1022,1206">&lt;&lt;if $from is &quot;house&quot;&gt;&gt;You climb back up the ladder quietly, not wanting to disturb the &lt;&lt;$boy&gt;&gt;s' game.  They don't seem to notice you.\n\n&lt;&lt;endif&gt;&gt;You settle back on the cushions and watch &lt;&lt;if $from is &quot;loft&quot;&gt;&gt;the two &lt;&lt;$boy&gt;&gt;s&lt;&lt;else&gt;&gt;them&lt;&lt;endif&gt;&gt; play a few rounds.  The shapes and colors go by almost faster than you can process, yet each round seems to last forever.  It's clear you were not putting up much of a fight.\n\nYou still have no idea what's going on.\n\n&lt;&lt;if $played is 3&gt;&gt;[[keep watching|LoftStare]]\n&lt;&lt;else if $played is 2&gt;&gt;[[try again|LoftPersist]]\n&lt;&lt;endif&gt;&gt;[[leave|House]]</div><div tiddler="SwelterStrip" tags="" created="201701170008" modifier="twee" twine-position="696,1535">You quickly strip off your clothes, but you don't feel any cooler.  If anything, the heat is worse.  You're having trouble standing up.\n/% TODO: steam becomes impossible to see through, then clears, leaving you in Baths %/\n[[try the door|SwelterToBaths][$from = &quot;door&quot;]]\n[[find the bathtub|SwelterToBaths][$from = &quot;tub&quot;]]</div><div tiddler="BathroomStrip" tags="" created="201701162044" modifier="twee" twine-position="386,1399">Glancing only once at the open door, you take your clothes off and pile them on the floor. Your hands barely shake at all.\n\n&lt;&lt;if $knocked and not $cold&gt;&gt;When you're done, the &lt;&lt;$boy&gt;&gt; looks you over and smiles. &quot;Much better,&quot; &lt;&lt;$he&gt;&gt; says. &lt;&lt;$He&gt;&gt; pulls &lt;&lt;$his&gt;&gt; legs up to make room for you in the tub.\n\n&quot;Now come on in, the water's perfect.&quot;&lt;&lt;else&gt;&gt;The room is a little chilly, despite the steam.  Without your clothes you start to get cold.&lt;&lt;endif&gt;&gt; \n&lt;&lt;set $stripped to 1&gt;&gt;\n&lt;&lt;if $knocked and not $cold&gt;&gt;[[get in the tub|BatheCompany]]&lt;&lt;else&gt;&gt;[[get in the tub|BatheAlone]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Downstream" tags="" created="201501042154" modifier="twee" twine-position="521,449">You follow the stream for a minute or so before arriving at a pair of shimmering glass doors.\n\n[[look|North]]</div><div tiddler="Beach" tags="" created="201501252256" modifier="twee" twine-position="1786,1023">&lt;&lt;if $from is &quot;Ocean&quot;&gt;&gt;You reach the shore without much difficulty, and walk out onto dry land.  &lt;&lt;else if $from is &quot;Lobby&quot;&gt;&gt;You walk through the door and across the sand to the shore.  &lt;&lt;endif&gt;&gt;The sand is warm and powder-fine under your feet, and the sound of the surf is gentle and lulling.  The ocean sparkles in the sunlight.\n\nAway from the water, the fine sand gives way to grass, trees, and ferns.  The leaves of the forest sway gently in the cool breeze.\n\n[Beach house?]\n\n[[go for a swim|Ocean]]\n[[enter the trees|BeachWoods]]\n[[lie down|BeachNap]]</div><div tiddler="FloatMost" tags="" created="201603311949" modifier="twee" twine-position="2062,325">A small wave brushes the two of you nearer.  You close your eyes for a moment and take a deep breath.  When you open them again, the room is pitch black and silent.\n\n[[look around|LightsOut][$from = &quot;floating&quot;]]</div><div tiddler="Drink" tags="" created="201501042152" modifier="twee" twine-position="363,444">The stream is surprisingly warm, like bathwater.  It smells of steam and salt.  You decide not to drink it.\n\n[[follow upstream|Upstream]]\n[[follow downstream|Downstream]]\n[[explore the forest|Explore]]</div><div tiddler="Credits" tags="credits" created="201502062233" modifier="twee" twine-position="9,287">//Adrift// was written by [[Malcolm Maes-McCrimmon|http://insearchofsecrets.com]], copyright 2017.  It is licensed under a Creative Commons [[BY-SA 4.0|http://creativecommons.org/licenses/by-sa/4.0/]] license: this means you are free to copy, distribute, modify, or borrow from it provided that you (1) credit the original author, and (2) distribute any modifications or borrowed material under the same or similar license. See the [[full terms|https://creativecommons.org/licenses/by-sa/4.0/legalcode]] for details.\n\nThank you for playing!\n\n&lt;&lt;if $end&gt;&gt;&lt;a onclick=&quot;location.reload()&quot; class=&quot;internalLink&quot;&gt;another night&lt;/a&gt;\s\n&lt;&lt;else&gt;&gt;[[go back|previous()]]&lt;&lt;endif&gt;&gt;</div><div tiddler="BeachNap" tags="" created="201606201924" modifier="twee" twine-position="1938,1088">You lie down and let the sand's warmth sink into your bare skin while the sun bakes you from above.  The sky is cloudless and dazzling.\n\nThough the sun is bright, there's no danger of burning.\n\n[[close your eyes|BeachAwake]]\n[[wake up.|Awake]]</div><div tiddler="Main Stylesheet" tags="stylesheet" created="201602040026" modifier="twee" twine-position="9,575">body {\n\tfont-size: small;\n}\n/*#sidebar {\n\twidth: 8em;\n\n}*/</div><div tiddler="LitKnock" tags="" created="201606222118" modifier="twee" twine-position="2825,448">&lt;&lt;set $lit to &quot;knocked&quot;&gt;&gt;[no response or reaction]\n\n[[go back|RoomsScrap]]</div><div tiddler="Room" tags="" created="201606222033" modifier="twee" twine-position="2500,302">&lt;&lt;if not visited(&quot;RoomShut&quot;)&gt;&gt;[description of door surface/texture goes here]&lt;&lt;else&gt;&gt;[briefened description of door-openness]&lt;&lt;endif&gt;&gt;\n\n[door takes you to SOMETHING GOOD???!?!?!* that (a) changes depending on variables (esp. $cold), and (b) changes something about the game (new menu option, mention in Awake, persists across playthroughs? Will depend on what I can come up with for the GOOD SOMETHING???!?!?!??!?]\n\n*[lucidity! ability to 'teleport' (in the menu), set (some) variables (including chance) manually - some passages can only be accessed by 'hacking' variables this way. Can be turned on and off in the menu.]\n\n/%[cold steel door takes you to row of prison cells, warm wooden door takes you to row of plush hotel rooms]\n\n[ORRRR:\n\ndefault: &quot;watch&quot;\ncompany: &quot;watch closely&quot;\ncold: &quot;listen&quot; (and cry???)]\n\n[ORRR ORRRR:\n\npedastal with fist-sized &quot;pearl&quot;, when you pick it up: default = beautiful and warm, company = orgasm, cold = jelly-like and disgusting, falls apart at your touch to reveal a rotten center]%/</div><div tiddler="OceanToStairs" tags="" created="201606201940" modifier="twee" twine-position="1603,787">[blah blah blah]\n\n[[go down the stairs|MiddleStairs][$from = &quot;above&quot;]]\n[[swim back up|Ocean][$from = &quot;stairs&quot;]]</div><div tiddler="Ocean" tags="" created="201602012036" modifier="twee" twine-position="1784,871">&lt;&lt;if $from is &quot;stairs&quot;&gt;&gt;The water is too thick to take a breath, so you simply dive in and start swimming.  For a few lungaching seconds you flail against the brilliant, churning water, not certain of up or down, or whether you're moving at all.\n\nJust as your lungs feel about to burst, you break free of the surface.  You take a few moments to catch your breath and brush the water from your eyes, then look around you.\n\n&lt;&lt;endif&gt;&gt;A warm, dazzling sun shines down from a cloudless blue sky.  Broad, lazy waves surround you, glittering in the sunlight and setting the horizon bobbing gently up and down.  A light, cool breeze is blowing.\n\nSome distance away, you spot a sandy beach edged by a lush, green forest.  It's not too far to swim.\n\n[[dive|OceanToStairs]]\n[[swim to shore|Beach][$from=&quot;Ocean&quot;]]</div><div tiddler="HouseToAttic" tags="" created="201701170217" modifier="twee" twine-position="80,1092">You're in a dim, cramped stairway lined with dozens of shelves and drawers of every size and shape.  The shelves are stuffed with trinkets, knick knacks, and all kinds of books.\n\nThe stairway curves slightly, obscuring each end.\n\n[[open a drawer|AtticDrawer]]\n[[examine a shelf|AtticShelf]]\n[[go up the stairs|Attic]]\n[[go down the stairs|House]]</div><div tiddler="FireWash" tags="" created="201602022106" modifier="twee" twine-position="698,1193">Trembling, you crawl forward and step into the fire.  Your clothes catch immediately, washing your body in flames.  The heat is incredible; you shudder and cry out, every muscle in your body twitching and clenching.  It fills you from the outside in, swelling until there is nothing left but the unbearable fire, you can't stand it but you can't bear to let it go, and--\n\n[[and|FireWake]]</div><div tiddler="Dream" tags="" created="201501111900" modifier="twee" twine-position="146,10">&lt;&lt;print either(&quot;Adrift&quot;, &quot;Aimless&quot;, &quot;Falling&quot;, &quot;Floating&quot;, &quot;Flying&quot;, &quot;Hollow&quot;, &quot;Lost&quot;, &quot;Nobody&quot;, &quot;Sinking&quot;, &quot;Vanished&quot;, &quot;Weightless&quot;)&gt;&gt;.\n\n[[boys are pretty|Somewhere][$likes = &quot;boys&quot;]]\n[[girls are pretty|Somewhere][$likes = &quot;girls&quot;]]</div><div tiddler="South" tags="" created="201501042334" modifier="twee" twine-position="699,37">The stream flows through a channel down a broad ramp on the other side of the glass, across a hall to an opening at the base of the wall, and out into the forest where you stand.  Across the hall,  on both sides of the ramp and as far as you can see, are empty counters with cabinets and shelves behind them.  No one is at the counters.\n\nTo one side of the stream is a glass door with a silver handle.\n\n&lt;&lt;if visited(&quot;FirstEntrance&quot;)&gt;&gt;[[go inside|Entrance]]&lt;&lt;else&gt;&gt;[[try the door|FirstEntrance]]&lt;&lt;endif&gt;&gt;\n[[go downstream|Forest]]</div><div tiddler="Garden" tags="" created="202303220312" modifier="twee" twine-position="2384,776">[GO IN to get to fountain; tunnels/baths]</div><div tiddler="BathroomSwelter" tags="" created="201701162044" modifier="twee" twine-position="696,1395">&lt;&lt;if not $locked&gt;&gt;You shut the door to the bathroom.  The room fills with steam right away; soon you can barely see through the fog.\n\nYou're getting very hot.&lt;&lt;else&gt;&gt;The door is locked; you can't open it.\n\nThe room is sweltering, and the steam is only getting thicker.  You start to feel dizzy.&lt;&lt;endif&gt;&gt;\n\n[[take off your clothes|SwelterStrip]]&lt;&lt;if not $locked&gt;&gt;\n[[leave|BathroomSwelter][$locked=1]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Float" tags="" created="201603280023" modifier="twee" twine-position="2052,24">While the two &lt;&lt;$boy&gt;&gt;s play, you turn on your back and simply float for a while.  After a minute or two, you hear splashing nearby.  You turn your head and see one of them treading water next to you, watching you float.  It's the same &lt;&lt;$boy&gt;&gt; who invited you in.\n\n[[say nothing|FloatMore]]\n[[talk|PoolTalk]]</div><div tiddler="FireBurn" tags="" created="201602022103" modifier="twee" twine-position="699,1050">&lt;&lt;set $burned to 1&gt;&gt;Slowly, you reach your hand into the fire.  The warmth turns to heat, then builds.\n\nYour whole hand is in the flames now.  The heat is unbearably intense, but it isn't pain.  Your skin sizzles and flakes, you're in agony, but you don't hurt.  You're sweating all over.  You feel shiveringly, gaspingly hot.\n\n[[pull back|FireBack]]\n[[step in|FireWash]]</div><div tiddler="Sleep" tags="" created="201502062228" modifier="twee" twine-position="286,11">...\n\n[[dream.|Dream]]</div><div tiddler="LoftPersist" tags="" created="201603301939" modifier="twee" twine-position="1179,1067">&lt;&lt;if $played is 1&gt;&gt;The &lt;&lt;$boy&gt;&gt;s offer to let you play another round, and you nervously agree. You go over everything you remember from the last round, determined to do better this time.\n\nWhen the game starts, though, the whole screen has changed. Seeing your expression, the &lt;&lt;$boy&gt;&gt; next to you quickly explains that most of the rules are the same, but the visual elements and certain modifiers get changed each round to &quot;keep things interesting.&quot;\n\nYou nod and do your best to keep up, but it's hopeless.  You can't remember what any of the colors or numbers mean, and with everything shuffled around you struggle with the basic controls.  The round is over even more quickly than the last.&lt;&lt;set $played to 2&gt;&gt;\n\n[[keep trying|LoftPersist]]\n[[give up|LoftResign]]\s\n&lt;&lt;else if $played is 2&gt;&gt;You ask the two &lt;&lt;$boy&gt;&gt;s if you can give it just one more go.  They agree easily enough, but the &lt;&lt;$boy&gt;&gt;  you've been playing against is starting to look bored.  When the game begins, the screen is once again completely unrecognizable.  This round lasts a little longer than your first, but it doesn't feel like you're getting any better.  You begin to suspect your opponent is going easy on you.\n\nWhen the round ends, you catch &lt;&lt;$him&gt;&gt; stifling a yawn.  &quot;Want another go?&quot; &lt;&lt;$he&gt;&gt; says.&lt;&lt;set $played to 3&gt;&gt;\n\n[[give up|LoftResign]]&lt;&lt;else&gt;&gt;[This shouldn't happen!]&lt;&lt;endif&gt;&gt;</div><div tiddler="LightsOn Stylesheet" tags="stylesheet awake credits" created="201602022109" modifier="twee" twine-position="2173,1661">body {\n\tcolor: black;\n\tbackground-color: white;\n\t\n}\n#sidebar li a {\n\tcolor: #333;\n\t\n}\n#sidebar li a:hover, #sidebar #title a:hover, #snapback:hover, #restart:hover {\n\tcolor: black;\n\t\n}</div><div tiddler="LoftListen" tags="" created="201611052120" modifier="twee" twine-position="1183,1517">You wait at the top of the ladder and listen to the &lt;&lt;$boy&gt;&gt;s' conversation.  Their murmurs and whispers are too faint to make out words, but you can hear well enough to sense their intimacy. Every few minutes there's a faint rustling of clothes, or a whisper of skin.\n\nAs your eyes adjust to the darkness, you notice stars glowing faintly on the ceiling.\n\n[[keep listening|LoftToStars]]\n[[leave|House]]</div><div tiddler="SwelterToBaths" tags="" created="202303280249" modifier="twee" twine-position="831,1695">[blah]\n\n[[see|Baths]]</div></div></body></html>
